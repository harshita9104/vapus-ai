(()=>{var e={};e.id=8711,e.ids=[8711],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9329:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/ai-center/guardrails/[guardrailId]/update/page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/ai-center/guardrails/[guardrailId]/update/page.js","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12530:(e,s,a)=>{"use strict";a.d(s,{$N:()=>i,MX:()=>l,QS:()=>o,ky:()=>n});var r=a(29341);let t={MODELS_REGISTRY:"/api/v1alpha1/aistudio/models"},l={getModelsRegistry:()=>(0,r.Zq)(t.MODELS_REGISTRY,"GET",null),getModelsRegistryID:e=>(0,r.Zq)(`${t.MODELS_REGISTRY}/${e}`,"GET",null)},n={getmodelsRegistryForm:e=>(0,r.Zq)(t.MODELS_REGISTRY,"POST",e)},i={getmodelsRegistryUpdateForm:e=>(0,r.Zq)(t.MODELS_REGISTRY,"PUT",e)},o={getModelsRegistryArchive:e=>(0,r.Zq)(`${t.MODELS_REGISTRY}/${e}`,"DELETE",null)}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19542:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=a(65239),t=a(48088),l=a(88170),n=a.n(l),i=a(30893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(s,o);let d={children:["",{children:["ai-center",{children:["guardrails",{children:["[guardrailId]",{children:["update",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,9329)),"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/ai-center/guardrails/[guardrailId]/update/page.js"]}]},{}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,75535)),"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(a.bind(a,28069)),"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/not-found.js"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/ai-center/guardrails/[guardrailId]/update/page.js"],p={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/ai-center/guardrails/[guardrailId]/update/page",pathname:"/ai-center/guardrails/[guardrailId]/update",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},22334:(e,s,a)=>{Promise.resolve().then(a.bind(a,43231))},27685:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});var r=a(60687);function t({name:e,onClick:s}){return(0,r.jsx)("button",{type:"button",onClick:s,className:"mt-2 px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 cursor-pointer",suppressHydrationWarning:!0,children:e})}a(43210)},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},43231:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>x});var r=a(60687),t=a(43210),l=a(74595);a(12530);var n=a(94342),i=a(8222),o=a(56723),d=a(77888),c=a(27685),p=a(50591),u=a(83613),m=a(16189),h=a(96368);function x({params:e}){let s=(0,m.useRouter)(),a=(0,t.use)(e),x=a?.guardrailId?String(a.guardrailId).trim():"",[g,f]=(0,t.useState)(null),[b,v]=(0,t.useState)([{topic:"",description:"",samples:[]}]),[j,y]=(0,t.useState)([{words:"",fileLocation:""}]),[N,w]=(0,t.useState)([{piiType:"",action:"",regex:""}]),[S,k]=(0,t.useState)([]),[C,_]=(0,t.useState)({}),[E,I]=(0,t.useState)([]),[M,R]=(0,t.useState)(""),[A,G]=(0,t.useState)("form"),[L,T]=(0,t.useState)([]),[z,D]=(0,t.useState)("vapus"),[O,F]=(0,t.useState)([]),[P,$]=(0,t.useState)({}),[U,q]=(0,t.useState)([]),[B,V]=(0,t.useState)([]),[Z,W]=(0,t.useState)([]),[H,Y]=(0,t.useState)(!0),[K,X]=(0,t.useState)(!1),[J,Q]=(0,t.useState)(null),[ee,es]=(0,t.useState)({AIGuardrailScanMode:[],ResourceScope:[],GuardRailLevels:[]}),ea=async e=>{let s=e.target.value;if(D(s),T([]),"bedrock"===s||"pangea"===s||"mistral"===s)try{X(!0);let e=await p.p.getBedrockGuardrailsApi(),s=e.bedrockOutput||[],a=e.pangeaOutput||[],r=e.mistralOutput||[];q(s),V(a),W(r),console.log("Bedrock guardrails:",s),console.log("Pangea guardrails:",a),console.log("Mistral guardrails:",r)}catch(e){console.error("Failed to fetch guardrails:",e),i.oR.error("Failed to fetch guardrails"),q([]),V([]),W([])}finally{X(!1)}else q([]),V([]),W([])},er=e=>{T(s=>s.some(s=>s.id===e.id)?s.filter(s=>s.id!==e.id):[...s,e])},et=e=>{R(e);let s=S.find(s=>s.modelNodeId===e);s?.attributes?.generativeModels?I(s.attributes.generativeModels):I([])},el=e=>{b.length>1&&v(b.filter((s,a)=>a!==e))},en=(e,s,a)=>{let r=[...b];"samples"===s?r[e][s]=a.split(",").map(e=>e.trim()).filter(e=>e):r[e][s]=a,v(r)},ei=e=>{j.length>1&&y(j.filter((s,a)=>a!==e))},eo=(e,s,a)=>{let r=[...j];"words"===s?r[e][s]=a.split(",").map(e=>e.trim()).filter(e=>e):r[e][s]=a,y(r)},ed=e=>{N.length>1&&w(N.filter((s,a)=>a!==e))},ec=(e,s,a)=>{let r=[...N];r[e][s]=a,w(r)},ep=e=>{if(null===e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(ep);let s={};for(let a in e)Object.prototype.hasOwnProperty.call(e,a)&&("minConfidence"===a||"maxConfidence"===a?s[a]=parseFloat(e[a]||0):"object"==typeof e[a]&&null!==e[a]?s[a]=ep(e[a]):s[a]=e[a]);return s},eu=async e=>{e.preventDefault();try{X(!0);let a=new FormData(e.target),r={displayName:a.get("spec.displayName")||g.displayName||"",name:a.get("spec.name")||g.name||"",minConfidence:parseFloat(a.get("spec.minConfidence")||g.minConfidence||0),maxConfidence:parseFloat(a.get("spec.maxConfidence")||g.maxConfidence||0),description:a.get("spec.description")||g.description||"",failureMessage:a.get("spec.failureMessage")||g.failureMessage||"",scanMode:a.get("spec.scanMode")||g.scanMode||"BIDIRECTIONAL",resourceBase:{...g.resourceBase,scope:a.get("spec.resourceBase.scope")||g.resourceBase?.scope||"ORGANIZATION_SCOPE"},contents:{hateSpeech:a.get("spec.contents.hateSpeech")||g.contents?.hateSpeech||"NONE",insults:a.get("spec.contents.insults")||g.contents?.insults||"NONE",sexual:a.get("spec.contents.sexual")||g.contents?.sexual||"NONE",threats:a.get("spec.contents.threats")||g.contents?.threats||"NONE",misconduct:a.get("spec.contents.misconduct")||g.contents?.misconduct||"NONE"},topics:b,words:j,sensitiveDataset:N,guardModel:{modelNodeId:a.get("spec.guardModel.modelNodeId")||g.guardModel?.modelNodeId||"",modelId:a.get("spec.guardModel.modelId")||g.guardModel?.modelId||""},guardrailId:x,eligibleModelNodes:g.eligibleModelNodes||[],partner:[]};if(L&&L.length>0){let e={};"bedrock"===z?e.bedrock=L:"mistral"===z?e.mistral=L:"pangea"===z&&(e.pangea=L),Object.keys(e).length>0&&(r.partner=[e])}let t={spec:r};console.log("Update Payload:",t);let l=await n.rW.getGuardrailUpdateForm(t);console.log("Resource updated:",l);let o=l.result;o?(i.oR.success(`${o.resource} Resource updated successfully.`),setTimeout(()=>{s.push(`/ai-center/guardrails/${x}`)},1e3)):(i.oR.success("Resource updated successfully."),setTimeout(()=>{s.push(`/ai-center/guardrails/${x}`)},1e3))}catch(e){console.error("Error updating guardrail:",e),i.oR.error(`Failed to update guardrail: ${e.message}`)}finally{X(!1)}};return g?(0,r.jsx)("div",{className:"bg-zinc-800 flex h-screen",children:(0,r.jsxs)("div",{className:"overflow-y-auto scrollbar h-screen w-full",children:[(0,r.jsx)(l.A,{sectionHeader:"Update Guardrail",hideBackListingLink:!1,backListingLink:"./"}),(0,r.jsx)(h.A,{}),(0,r.jsx)(o.A,{isLoading:K,isOverlay:!0}),(0,r.jsx)("div",{className:"flex-grow p-4 overflow-y-auto w-full",children:(0,r.jsx)("section",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto bg-[#1b1b1b] shadow rounded-lg p-2",children:[(0,r.jsx)("div",{className:"text-gray-100 mb-2 flex justify-center",children:(0,r.jsx)("button",{onClick:()=>G("form"),className:`whitespace-nowrap border-b-2 py-2 px-2 text-md font-medium focus:outline-none ml-4 ${"form"===A?"border-orange-700 text-orange-700 font-semibold":"border-black"}`,children:"Form"})}),"yaml"===A?(0,r.jsx)("div",{id:"yamlSpec",className:"p-4 bg-zinc-900 text-gray-100 rounded"}):(0,r.jsx)("div",{id:"formSpec",children:(0,r.jsx)("form",{id:"dataSourceSpec",className:"space-y-2 border border-zinc-500 rounded-md text-gray-100 p-2",onSubmit:eu,children:(0,r.jsxs)("fieldset",{className:"p-4 rounded",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"spec_name",className:"labels",children:"Name"}),(0,r.jsx)("input",{id:"spec_name",name:"spec.name",type:"text",defaultValue:g.name,placeholder:"Enter name",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"spec_scanMode",className:"block text-sm font-medium mb-1",children:"Guardrail Type"}),(0,r.jsx)("select",{id:"spec_guardrailType",name:"spec.guardrailType",className:"w-full flex justify-between items-center bg-zinc-800 px-4 py-2 text-sm font-medium rounded border border-zinc-700 focus:ring-1 focus:ring-orange-700 focus:outline-none",value:z,onChange:ea,suppressHydrationWarning:!0,children:O.map(e=>(0,r.jsx)("option",{value:e,children:(0,u.E)(e)},e))})]})]}),("vapus"===z||"bedrock"===z||"mistral"===z||"pangea"===z)&&(0,r.jsxs)("div",{className:"shadow-sm border border-zinc-500 rounded-md shadow-sm p-4 mb-4",children:[(0,r.jsx)("legend",{className:"text-xl font-bold text-gray-100",children:"vapus"===z?"Vapus Guardrails":`${z} Available Guardrails`}),"vapus"===z&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"spec_minConfidence",className:"labels",children:"Minimum Confidence"}),(0,r.jsx)("input",{id:"spec_minConfidence",name:"spec.minConfidence",type:"number",step:"0.001",defaultValue:g.minConfidence,placeholder:"Enter Minimum Confidence",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"spec_maxConfidence",className:"labels",children:"Maximum Confidence"}),(0,r.jsx)("input",{id:"spec_maxConfidence",name:"spec.maxConfidence",type:"number",step:"0.001",defaultValue:g.maxConfidence,placeholder:"Enter Maximum Confidence",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"spec_Description",className:"labels",children:"Description"}),(0,r.jsx)("textarea",{id:"spec_Description",name:"spec.description",placeholder:"Enter Description",rows:"3",defaultValue:g.description,className:"form-textarea overflow-y-auto scrollbar text-sm rounded-md bg-zinc-700 placeholder-gray-300 p-2 shadow-sm w-full"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"spec_failureMessage",className:"labels",children:"Failure Message"}),(0,r.jsx)("textarea",{id:"spec_failureMessage",name:"spec.failureMessage",placeholder:"Enter failureMessage",rows:"3",defaultValue:g.failureMessage,className:"form-textarea overflow-y-auto scrollbar text-sm rounded-md bg-zinc-700 placeholder-gray-300 p-2 shadow-sm w-full"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"spec_scanMode",className:"labels",children:"Scan Mode"}),(0,r.jsxs)("select",{id:"spec_scanMode",name:"spec.scanMode",defaultValue:g.scanMode,className:"mt-1 w-full flex justify-between items-center bg-zinc-800 px-4 py-2 text-sm font-medium focus:ring-1 focus:ring-orange-700",children:[(0,r.jsx)("option",{value:"INVALID_SSP",children:"Select Scan Mode"}),ee.AIGuardrailScanMode.map(e=>(0,r.jsx)("option",{value:e,children:(0,u.E)(e)},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"spec_resourceBase_scope",className:"labels",children:"Scope"}),(0,r.jsxs)("select",{id:"spec_resourceBase_scope",name:"spec.resourceBase.scope",defaultValue:g.resourceBase?.scope||"ORGANIZATION_SCOPE",className:"mt-1 w-full flex justify-between items-center bg-zinc-800 px-4 py-2 text-sm font-medium focus:ring-1 focus:ring-orange-700",children:[(0,r.jsx)("option",{value:"ORGANIZATION_SCOPE",children:"Select Scope"}),ee.ResourceScope.map(e=>(0,r.jsx)("option",{value:e,children:(0,u.E)(e)},e))]})]})]}),(0,r.jsxs)("details",{className:"shadow-sm border border-zinc-500 rounded-md shadow-sm p-4 mb-4",children:[(0,r.jsx)("summary",{className:"text-lg font-semibold text-gray-100 cursor-pointer",children:"Contents"}),(0,r.jsx)("fieldset",{className:"rounded mb-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"spec_ContentsHatespeech",className:"labels",children:"Hate Speech Level"}),(0,r.jsxs)("select",{id:"spec_ContentsHatespeech",name:"spec.contents.hateSpeech",defaultValue:g.contents?.hateSpeech||"",className:"mt-1 w-full flex justify-between items-center bg-zinc-800 px-4 py-2 text-sm font-medium focus:ring-1 focus:ring-orange-700",children:[(0,r.jsx)("option",{value:"",children:"Select Hate Speech Level"}),ee.GuardRailLevels.map(e=>(0,r.jsx)("option",{value:e,children:(0,u.E)(e)},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"spec_ContentsInsults",className:"labels",children:"Insults Level"}),(0,r.jsxs)("select",{id:"spec_ContentsInsults",name:"spec.contents.insults",defaultValue:g.contents?.insults||"",className:"mt-1 w-full flex justify-between items-center bg-zinc-800 px-4 py-2 text-sm font-medium focus:ring-1 focus:ring-orange-700",children:[(0,r.jsx)("option",{value:"",children:"Select Insults Level"}),ee.GuardRailLevels.map(e=>(0,r.jsx)("option",{value:e,children:(0,u.E)(e)},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"spec_ContentsSexual",className:"labels",children:"Sexual Harassment Level"}),(0,r.jsxs)("select",{id:"spec_ContentsSexual",name:"spec.contents.sexual",defaultValue:g.contents?.sexual||"",className:"mt-1 w-full flex justify-between items-center bg-zinc-800 px-4 py-2 text-sm font-medium focus:ring-1 focus:ring-orange-700",children:[(0,r.jsx)("option",{value:"",children:"Select Sexual Harassment Level"}),ee.GuardRailLevels.map(e=>(0,r.jsx)("option",{value:e,children:(0,u.E)(e)},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"spec_ContentsThreats",className:"labels",children:"Threats Level"}),(0,r.jsxs)("select",{id:"spec_ContentsThreats",name:"spec.contents.threats",defaultValue:g.contents?.threats||"",className:"mt-1 w-full flex justify-between items-center bg-zinc-800 px-4 py-2 text-sm font-medium focus:ring-1 focus:ring-orange-700",children:[(0,r.jsx)("option",{value:"",children:"Select Threats Level"}),ee.GuardRailLevels.map(e=>(0,r.jsx)("option",{value:e,children:(0,u.E)(e)},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"spec_ContentsMisconduct",className:"labels",children:"Misconduct Level"}),(0,r.jsxs)("select",{id:"spec_ContentsMisconduct",name:"spec.contents.misconduct",defaultValue:g.contents?.misconduct||"",className:"mt-1 w-full flex justify-between items-center bg-zinc-800 px-4 py-2 text-sm font-medium focus:ring-1 focus:ring-orange-700",children:[(0,r.jsx)("option",{value:"",children:"Select Misconduct Level"}),ee.GuardRailLevels.map(e=>(0,r.jsx)("option",{value:e,children:(0,u.E)(e)},e))]})]})]})})]}),(0,r.jsxs)("details",{className:"shadow-sm border border-zinc-500 rounded-md shadow-sm p-4 mb-4",children:[(0,r.jsx)("summary",{className:"text-lg font-semibold text-gray-100 cursor-pointer",children:"Topics"}),(0,r.jsxs)("fieldset",{className:"p-4 rounded",children:[(0,r.jsx)("div",{id:"topicsContainer",children:b.map((e,s)=>(0,r.jsxs)("div",{className:"shadow-sm border border-zinc-500 rounded-md shadow-sm p-4 mb-4",children:[(0,r.jsx)("label",{htmlFor:`spec_Topics_${s}_topic`,className:"labels",children:"Topic Name"}),(0,r.jsx)("input",{id:`spec_Topics_${s}_topic`,type:"text",value:e.topic,onChange:e=>en(s,"topic",e.target.value),placeholder:"Enter topic name",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full mb-2"}),(0,r.jsx)("label",{htmlFor:`spec_Topics_${s}_description`,className:"labels",children:"Topic Description"}),(0,r.jsx)("textarea",{id:`spec_Topics_${s}_description`,value:e.description,onChange:e=>en(s,"description",e.target.value),placeholder:"Enter description",className:"form-textarea overflow-y-auto scrollbar text-sm rounded-md bg-zinc-700 placeholder-gray-300 p-2 shadow-sm w-full"}),(0,r.jsx)("label",{htmlFor:`spec_Topics_${s}_samples`,className:"labels",children:"Topic Samples"}),(0,r.jsx)("input",{id:`spec_Topics_${s}_samples`,type:"text",value:Array.isArray(e.samples)?e.samples.join(","):"",onChange:e=>en(s,"samples",e.target.value),placeholder:"Enter samples (comma separated)",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full"}),s>0&&(0,r.jsx)(d.A,{onClick:()=>el(s)})]},`topic-${s}`))}),(0,r.jsx)(c.A,{onClick:()=>{v([...b,{topic:"",description:"",samples:[]}])},name:"+ Add Topic"})]})]}),(0,r.jsxs)("details",{className:"shadow-sm border border-zinc-500 rounded-md shadow-sm p-4 mb-4",children:[(0,r.jsx)("summary",{className:"text-lg font-semibold text-gray-100 cursor-pointer",children:"Words"}),(0,r.jsxs)("fieldset",{className:"rounded mb-4",children:[(0,r.jsx)("div",{id:"wordsContainer",children:j.map((e,s)=>(0,r.jsxs)("div",{className:"word-entry border p-3 rounded mb-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"labels",children:"Words (comma separated)"}),(0,r.jsx)("input",{type:"text",value:Array.isArray(e.words)?e.words.join(","):"",onChange:e=>eo(s,"words",e.target.value),placeholder:"Enter words (comma separated)",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"labels",children:"File Location"}),(0,r.jsx)("input",{type:"text",value:e.fileLocation,onChange:e=>eo(s,"fileLocation",e.target.value),placeholder:"Enter file location",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full"})]})]}),s>0&&(0,r.jsx)(d.A,{onClick:()=>ei(s)})]},`word-${s}`))}),(0,r.jsx)(c.A,{name:"+ Add Word Entry",onClick:()=>{y([...j,{words:"",fileLocation:""}])}})]})]}),(0,r.jsxs)("details",{className:"shadow-sm border border-zinc-500 rounded-md shadow-sm p-4 mb-4",children:[(0,r.jsx)("summary",{className:"text-lg font-semibold text-gray-100 cursor-pointer",children:"Sensitive Dataset"}),(0,r.jsxs)("fieldset",{className:"rounded mb-4",children:[(0,r.jsx)("div",{id:"sensitiveDatasetContainer",children:N.map((e,s)=>(0,r.jsxs)("div",{className:"sensitive-entry border p-3 rounded mb-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"labels",children:"PII Type"}),(0,r.jsx)("input",{type:"text",value:e.piiType,onChange:e=>ec(s,"piiType",e.target.value),placeholder:"Enter PII type",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"labels",children:"Action"}),(0,r.jsx)("input",{type:"text",value:e.action,onChange:e=>ec(s,"action",e.target.value),placeholder:"Enter action",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"labels",children:"Regex"}),(0,r.jsx)("input",{type:"text",value:e.regex,onChange:e=>ec(s,"regex",e.target.value),placeholder:"Enter regex pattern",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full"})]})]}),s>0&&(0,r.jsx)(d.A,{onClick:()=>ed(s)})]},`sensitive-${s}`))}),(0,r.jsx)(c.A,{name:"+ Add Sensitive Data Entry",onClick:()=>{w([...N,{piiType:"",action:"",regex:""}])}})]})]}),(0,r.jsxs)("details",{className:"shadow-sm border border-zinc-500 rounded-md shadow-sm p-4 mb-4",children:[(0,r.jsx)("summary",{className:"text-lg font-semibold text-gray-100 cursor-pointer",children:"Guard Model"}),(0,r.jsx)("fieldset",{className:"rounded mb-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"labels",children:"Model Node ID"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("select",{id:"spec_guardModel_modelNodeId",name:"spec.guardModel.modelNodeId",onChange:e=>et(e.target.value),value:M,className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full",children:[(0,r.jsx)("option",{value:"",children:"Select Model Gateway"}),S.map(e=>(0,r.jsx)("option",{value:e.modelNodeId,className:"text-sm",children:e.name},e.modelNodeId))]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"labels",children:"Model ID"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("select",{id:"spec_guardModel_modelId",name:"spec.guardModel.modelId",defaultValue:g.guardModel?.modelId||"",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full",children:[(0,r.jsx)("option",{value:"",children:"Select Model"}),E.map(e=>(0,r.jsx)("option",{value:e.modelId,className:"text-sm ",children:e.modelName},e.modelId))]})})]})]})})]})]}),("bedrock"===z||"mistral"===z||"pangea"===z)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{className:"labels",children:"Select Guardrails"}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("div",{className:"rounded mb-4 max-h-36 scrollbar overflow-y-auto",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-4",children:["bedrock"===z&&U.map(e=>{let s=L.some(s=>"object"==typeof s&&s.id===e.id);return(0,r.jsxs)("div",{className:`border rounded-md p-3 cursor-pointer transition-all duration-200 flex items-center justify-between ${s?"border-orange-700 bg-zinc-700":"border-zinc-600 hover:border-orange-700 hover:bg-zinc-700"}`,onClick:()=>er(e),children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:(0,u.E)(e.name||e.Name||`Guardrail ${e.id}`)}),s&&(0,r.jsx)("div",{className:"text-orange-500",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("polyline",{points:"20 6 9 17 4 12"})})})]},e.id)}),"pangea"===z&&B.map(e=>{let s=L.some(s=>"object"==typeof s&&s.id===e.id);return(0,r.jsxs)("div",{className:`border rounded-md p-3 cursor-pointer transition-all duration-200 flex items-center justify-between ${s?"border-orange-700 bg-zinc-700":"border-zinc-600 hover:border-orange-700 hover:bg-zinc-700"}`,onClick:()=>er(e),children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:(0,u.E)(e.name||e.Name||`Guardrail ${e.id}`)}),s&&(0,r.jsx)("div",{className:"text-orange-500",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("polyline",{points:"20 6 9 17 4 12"})})})]},e.id)}),"mistral"===z&&Z.map(e=>{let s=L.some(s=>"object"==typeof s&&s.id===e.id);return(0,r.jsxs)("div",{className:`border rounded-md p-3 cursor-pointer transition-all duration-200 flex items-center justify-between ${s?"border-orange-700 bg-zinc-700":"border-zinc-600 hover:border-orange-700 hover:bg-zinc-700"}`,onClick:()=>er(e),children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:(0,u.E)(e.name||e.Name||`Guardrail ${e.id}`)}),s&&(0,r.jsx)("div",{className:"text-orange-500",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("polyline",{points:"20 6 9 17 4 12"})})})]},e.id)})]})}),(0,r.jsx)("input",{type:"hidden",name:"selectedGuardrails",value:JSON.stringify(L)})]})]})]}),(0,r.jsx)("div",{className:"mt-4 flex justify-end space-x-2",children:(0,r.jsx)("button",{type:"submit",disabled:H,className:"px-6 py-2 bg-orange-700 text-white rounded-md shadow hover:bg-pink-900",children:H?(0,r.jsxs)("svg",{className:"animate-spin h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):"Submit"})})]})})})]})})})]})}):(0,r.jsx)("div",{className:"bg-zinc-800 flex h-screen",children:(0,r.jsxs)("div",{className:"overflow-y-auto scrollbar h-screen w-full",children:[(0,r.jsx)(l.A,{}),(0,r.jsx)("div",{className:"flex-grow p-4 overflow-y-auto w-full",children:(0,r.jsxs)("div",{className:"flex justify-center items-center h-64",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-700"}),(0,r.jsx)("p",{className:"ml-3 text-gray-100",children:"Loading guardrail data..."})]})})]})})}},50591:(e,s,a)=>{"use strict";a.d(s,{N:()=>l,p:()=>n});var r=a(29341);let t={ENUMS:"/api/v1alpha1/resources-spec",BEDROCKGUARDRAILS:"/api/v1alpha1/aistudio/guardrails-plugins"},l={getEnums:()=>(0,r.Zq)(t.ENUMS,"GET",null)},n={getBedrockGuardrailsApi:()=>(0,r.Zq)(t.BEDROCKGUARDRAILS,"GET",null)}},59126:(e,s,a)=>{Promise.resolve().then(a.bind(a,9329))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},77888:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});var r=a(60687);function t({onClick:e,name:s="Remove"}){return(0,r.jsx)("button",{type:"button",onClick:e,className:"mt-2 px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600 cursor-pointer",children:s})}a(43210)},79551:e=>{"use strict";e.exports=require("url")},83613:(e,s,a)=>{"use strict";function r(e){return e?e.replace(/_/g," ").toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):""}function t(e,s){return e?!s||s<=0||e.length<=s?e:e.substring(0,s)+"...":""}a.d(s,{E:()=>r,m:()=>t})},94342:(e,s,a)=>{"use strict";a.d(s,{o6:()=>l,rW:()=>i,wp:()=>o,yg:()=>n});var r=a(29341);let t={GUARDRAILS:"/api/v1alpha1/aistudio/guardrails"},l={getGuardrail:()=>(0,r.Zq)(t.GUARDRAILS,"GET",null),getGuardrailId:e=>(0,r.Zq)(`${t.GUARDRAILS}/${e}`,"GET",null)},n={getGuardrailForm:e=>(0,r.Zq)(t.GUARDRAILS,"POST",e)},i={getGuardrailUpdateForm:e=>(0,r.Zq)(t.GUARDRAILS,"PUT",e)},o={getGuardrailArchive:e=>(0,r.Zq)(`${t.GUARDRAILS}/${e}`,"DELETE",null)}}};var s=require("../../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[4447,8259,4291,3124,4595],()=>a(19542));module.exports=r})();