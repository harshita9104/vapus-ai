(()=>{var e={};e.id=5953,e.ids=[5953],e.modules={2077:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var a=t(60687),r=t(43210),l=t(16189),n=t(74595),o=t(63995),i=t(56723),p=t(8222),d=t(96368),c=t(78907);function m({params:e}){let s=(0,r.use)(e),t=s?.promptID?String(s.promptID).trim():"",m=(0,l.useRouter)(),[u,x]=(0,r.useState)("form"),[h,g]=(0,r.useState)(null),[b,y]=(0,r.useState)(!0),[v,f]=(0,r.useState)([]),[j,w]=(0,r.useState)([]),[N,k]=(0,r.useState)([]),[S,T]=(0,r.useState)(!1),P=(0,r.useRef)(null),C=(0,r.useRef)(null),[z,E]=(0,r.useState)({name:"",promptTypes:[],spec:{userMessage:"",systemMessage:"",variables:[],sample:{inputText:"",response:""},tools:[]},labels:[]}),M=e=>{let{name:s,value:t}=e.target;if(s.includes(".")){let[e,a]=s.split(".");E(s=>({...s,[e]:{...s[e],[a]:t}}))}else E(e=>({...e,[s]:t}))},O=e=>{let{name:s,value:t}=e.target,a=s.split(".")[2];E(e=>({...e,spec:{...e.spec,sample:{...e.spec.sample,[a]:t}}}))},A=(e,s)=>{if(""!==s.trim())switch(e){case"variable":f(e=>[...e,s.trim()]),E(e=>({...e,spec:{...e.spec,variables:[...e.spec.variables,s.trim()]}}));break;case"label":w(e=>[...e,s.trim()]),E(e=>({...e,labels:[...e.labels,s.trim()]}));break;case"promptType":k(e=>[...e,s.trim()]),E(e=>({...e,promptTypes:[...e.promptTypes,s.trim()]}))}},R=(e,s)=>{switch(e){case"variable":f(e=>e.filter((e,t)=>t!==s)),E(e=>({...e,spec:{...e.spec,variables:e.spec.variables.filter((e,t)=>t!==s)}}));break;case"label":w(e=>e.filter((e,t)=>t!==s)),E(e=>({...e,labels:e.labels.filter((e,t)=>t!==s)}));break;case"promptType":k(e=>e.filter((e,t)=>t!==s)),E(e=>({...e,promptTypes:e.promptTypes.filter((e,t)=>t!==s)}))}},q=async e=>{e.preventDefault();try{y(!0);let e={promptId:t,name:z.name,promptTypes:z.promptTypes,spec:{variables:z.spec.variables,userMessage:z.spec.userMessage,systemMessage:z.spec.systemMessage,sample:z.spec.sample,tools:z.spec.tools},labels:z.labels};console.log("Submitting update with payload:",e);let s=await o.bl.getPromptsUpdteForm({spec:e});console.log("Resource updated:",s),p.oR.success("Prompt updated successfully"),setTimeout(()=>{t&&m.push(`/ai-center/prompts/${t}`)},1e3)}catch(e){console.error("Error submitting form:",e),p.oR.error("Failed to update prompt")}finally{y(!1)}};return(0,a.jsx)("div",{className:"bg-zinc-800 flex h-screen",children:(0,a.jsxs)("div",{className:"overflow-y-auto  scrollbar h-screen w-full",children:[(0,a.jsx)(n.A,{sectionHeader:"Update Prompt",hideBackListingLink:!1,backListingLink:"./"}),(0,a.jsx)(i.A,{isLoading:b,isOverlay:!0}),(0,a.jsx)(d.A,{}),(0,a.jsx)("div",{className:"flex-grow p-4 overflow-y-auto w-full",children:(0,a.jsx)("section",{id:"grids",className:"space-y-2",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto bg-[#1b1b1b] shadow rounded-lg p-2",children:[(0,a.jsx)("div",{className:"text-gray-100 mb-2 flex justify-center",children:(0,a.jsx)("button",{id:"formSpecB",className:`whitespace-nowrap border-b-2 py-2 px-2 text-md font-medium focus:outline-none ml-4 ${"form"===u?"border-orange-700 text-orange-700 font-semibold":"border-black"}`,onClick:()=>x("form"),suppressHydrationWarning:!0,children:"Form"})}),(0,a.jsx)("div",{id:"yamlSpec",style:{display:"yaml"===u?"block":"none"}}),(0,a.jsx)("div",{id:"formSpec",style:{display:"form"===u?"block":"none"},children:(0,a.jsxs)("form",{id:"vapusPromptSpec",className:"space-y-2 border border-zinc-500 rounded-md text-gray-100 p-2",onSubmit:q,children:[(0,a.jsxs)("fieldset",{className:"p-4 rounded",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"labels",children:"Name"}),(0,a.jsx)("input",{id:"name",name:"name",value:z.name,onChange:M,type:"text",placeholder:"Enter name",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full",suppressHydrationWarning:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"promptTypes-input-tag",className:"labels",children:"Prompt Types"}),(0,a.jsx)("input",{type:"text",id:"promptTypes-input-tag",placeholder:"Enter Prompt Types",suppressHydrationWarning:!0,className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),A("promptType",e.target.value),e.target.value="")}}),(0,a.jsx)("ul",{id:"promptTypes-tags",className:"flex flex-wrap gap-2 mt-1",children:N.map((e,s)=>(0,a.jsxs)("li",{className:"text-purple-800 bg-purple-100 px-2 py-1 rounded-lg flex items-center",children:[e,(0,a.jsx)("span",{className:"ml-2 cursor-pointer",onClick:()=>R("promptType",s),children:"\xd7"})]},s))})]})]}),(0,a.jsxs)("fieldset",{className:"rounded mb-4 border border-zinc-600 rounded-md shadow-sm p-4",children:[(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{htmlFor:"variable-input-tag",className:"labels",children:"Variables"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"text",id:"variable-input-tag",placeholder:"Enter Variables",className:"w-full rounded-md bg-zinc-700 text-gray-100 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-2 w-full mt-2",suppressHydrationWarning:!0,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),A("variable",e.target.value),e.target.value="")}}),(0,a.jsx)("ul",{id:"tags",className:"flex flex-wrap gap-2 mt-1",children:v.map((e,s)=>(0,a.jsxs)("li",{className:"text-purple-800 bg-purple-100 px-2 py-1 rounded-lg flex items-center",children:[e,(0,a.jsx)("span",{className:"ml-2 cursor-pointer",onClick:()=>R("variable",s),children:"\xd7"})]},s))})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 mt-6 md:grid-cols-1 gap-4",children:(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{htmlFor:"myTextarea-1",className:"labels",children:"User Message"}),(0,a.jsx)("textarea",{name:"spec.userMessage",id:"myTextarea-1",ref:P,rows:"4",value:z.spec.userMessage,onChange:M,placeholder:"Enter User Message",className:"form-textarea overflow-y-auto scrollbar text-sm rounded-md bg-zinc-700 placeholder-gray-300 p-2 shadow-sm w-full",suppressHydrationWarning:!0})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 mt-6 md:grid-cols-1 gap-4",children:(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{htmlFor:"myTextarea-2",className:"labels",children:"System Message"}),(0,a.jsx)("textarea",{name:"spec.systemMessage",ref:C,id:"myTextarea-2",rows:"4",value:z.spec.systemMessage,onChange:M,placeholder:"Enter System Message",className:"form-textarea overflow-y-auto scrollbar text-sm rounded-md bg-zinc-700 placeholder-gray-300 p-2 shadow-sm w-full"})]})}),(0,a.jsxs)("fieldset",{className:"rounded mt-6 mb-4",children:[(0,a.jsx)("legend",{className:"text-lg font-semibold text-gray-100",children:"Sample"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"sample-input-text",className:"labels",children:"Input Text"}),(0,a.jsx)("input",{id:"sample-input-text",name:"spec.sample.inputText",value:z.spec.sample.inputText,onChange:O,type:"text",placeholder:"Enter Input Text",suppressHydrationWarning:!0,className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"sample-response",className:"labels",children:"Response"}),(0,a.jsx)("input",{id:"sample-response",name:"spec.sample.response",value:z.spec.sample.response,onChange:O,type:"text",placeholder:"Enter Response",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full",suppressHydrationWarning:!0})]})]})]}),(0,a.jsx)("div",{id:"Labels",className:"grid grid-cols-1 md:grid-cols-1 gap-4",children:(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{htmlFor:"label-input-tag",className:"labels",children:"Labels"}),(0,a.jsx)("input",{type:"text",id:"label-input-tag",placeholder:"Enter Labels",className:"w-full rounded-md bg-zinc-700 text-gray-100 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-2 w-full mt-2",suppressHydrationWarning:!0,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),A("label",e.target.value),e.target.value="")}}),(0,a.jsx)("ul",{id:"label-tags",className:"flex flex-wrap gap-2 mt-1",children:j.map((e,s)=>(0,a.jsxs)("li",{className:"text-yellow-800 bg-yellow-100 px-2 py-1 rounded-lg flex items-center",children:[e,(0,a.jsx)("span",{className:"ml-2 cursor-pointer",onClick:()=>R("label",s),children:"\xd7"})]},s))})]})}),(0,a.jsxs)("div",{id:"toolCall",className:"flex mt-2 mb-2",children:[(0,a.jsx)("button",{id:"addToolCallButton",type:"button",onClick:()=>{T(!0)},className:"bg-orange-700 w-full px-2 py-2 text-sm rounded-lg focus:outline-none cursor-pointer",suppressHydrationWarning:!0,children:"Add Tool Call"}),(0,a.jsx)(c.A,{isOpen:S,onClose:()=>{T(!1)},onAddTool:e=>{E(s=>({...s,spec:{...s.spec,tools:[e]}}))},existingTools:z.spec.tools.length>0?z.spec.tools[0]:null,editingIndex:0})]})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex justify-end space-x-2",children:[(0,a.jsx)("button",{type:"submit",className:`px-6 py-2 bg-orange-700 text-white rounded-md shadow hover:bg-pink-900 ${b?"hidden":""}`,children:"Submit"}),(0,a.jsx)("button",{type:"button",className:`px-6 py-2 bg-orange-700 text-white rounded-md shadow hover:bg-pink-900 ${b?"":"hidden"}`,suppressHydrationWarning:!0,children:(0,a.jsxs)("svg",{className:"animate-spin h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})})]})]})})]})})})]})})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},24078:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>c,pages:()=>d,routeModule:()=>m,tree:()=>p});var a=t(65239),r=t(48088),l=t(88170),n=t.n(l),o=t(30893),i={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);t.d(s,i);let p={children:["",{children:["ai-center",{children:["prompts",{children:["[promptID]",{children:["update",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,58591)),"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/ai-center/prompts/[promptID]/update/page.js"]}]},{}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,75535)),"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(t.bind(t,28069)),"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/not-found.js"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/ai-center/prompts/[promptID]/update/page.js"],c={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/ai-center/prompts/[promptID]/update/page",pathname:"/ai-center/prompts/[promptID]/update",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:p}})},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},58591:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/ai-center/prompts/[promptID]/update/page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/ai-center/prompts/[promptID]/update/page.js","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63995:(e,s,t)=>{"use strict";t.d(s,{UG:()=>n,bl:()=>o,eM:()=>l,tW:()=>i});var a=t(29341);let r={PROMPTS:"/api/v1alpha1/aistudio/prompts"},l={getPrompts:()=>(0,a.Zq)(r.PROMPTS,"GET",null),getPromptsId:e=>(0,a.Zq)(`${r.PROMPTS}/${e}`,"GET",null)},n={getPromptsForm:e=>(0,a.Zq)(r.PROMPTS,"POST",e)},o={getPromptsUpdteForm:e=>(0,a.Zq)(r.PROMPTS,"PUT",e)},i={getPromptArchive:e=>(0,a.Zq)(`${r.PROMPTS}/${e}`,"DELETE",null)}},72610:(e,s,t)=>{Promise.resolve().then(t.bind(t,58591))},78907:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});var a=t(60687),r=t(43210);function l(e){let[s,t]=(0,r.useState)(e?"loading":"idle");return s}function n({isOpen:e,onClose:s,onAddTool:t,existingTools:n=null,editingIndex:o=-1}){let[i,p]=(0,r.useState)("plainJSON"),[d,c]=(0,r.useState)(null),[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(""),[g,b]=(0,r.useState)(""),[y,v]=(0,r.useState)(JSON.stringify({schema:"Tool schema will appear here"},null,2)),f=(0,r.useRef)(null),j=-1!==o;l("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"),l("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/theme-twilight.js"),l("https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/mode-json.js");let w=e=>{p(e)},N=e=>{if(null===e)return{type:"null"};if(Array.isArray(e))return 0===e.length?{type:"array",items:{}}:{type:"array",items:N(e[0])};if("object"==typeof e){let s={type:"object",properties:{},required:[]};for(let t in e)Object.hasOwnProperty.call(e,t)&&(s.properties[t]=N(e[t]),s.required.push(t));return s}return"string"==typeof e?{type:"string"}:"number"==typeof e?{type:"number"}:"boolean"==typeof e?{type:"boolean"}:{}};return e?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"fixed inset-0 bg-zinc-600/80 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-zinc-800 rounded-lg shadow-lg w-3/4 h-3/4 md:w-1/2 overflow-y-auto scrollbar text-gray-100",children:[(0,a.jsxs)("div",{className:"bg-zinc-900 px-4 py-2 flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-lg font-bold",children:j?"Update AI Tool":"Add AI Tool"}),(0,a.jsx)("button",{className:"text-gray-100 cursor-pointer text-lg",type:"button",onClick:s,children:"\xd7"})]}),(0,a.jsx)("div",{className:"px-4 py-2 flex justify-between items-center",children:(0,a.jsx)("input",{type:"text",placeholder:"Enter function name...",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full",value:m,onChange:e=>u(e.target.value)})}),(0,a.jsx)("div",{className:"px-4 py-2 flex justify-between items-center",children:(0,a.jsx)("input",{type:"text",placeholder:"Enter description name...",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full",value:x,onChange:e=>h(e.target.value)})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("button",{type:"button",className:`w-1/2 py-2 text-center ${"plainJSON"===i?"text-orange-700":"hover:text-orange-700 hover:border-orange-700 cursor-pointer"}`,onClick:()=>w("plainJSON"),children:"Plain JSON"}),(0,a.jsx)("button",{type:"button",className:`w-1/2 py-2 text-center ${"toolSchema"===i?"text-orange-700":"hover:text-orange-700 hover:border-orange-700 cursor-pointer"}`,onClick:()=>w("toolSchema"),children:"Tool Schema"})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:`tab-content ${"plainJSON"!==i?"hidden":""}`,children:[(0,a.jsx)("textarea",{className:"form-textarea overflow-y-auto scrollbar text-sm rounded-md bg-zinc-700 placeholder-gray-500 p-2 shadow-sm w-full",rows:"9",placeholder:"Enter JSON here, and convert it to json Schema by clicking the button below...",value:g,onChange:e=>b(e.target.value)}),(0,a.jsx)("button",{onClick:()=>{try{let e=JSON.parse(g),s=N(e),t=JSON.stringify(s,null,2);v(t),d&&(d.setValue(t),d.clearSelection()),w("toolSchema")}catch(e){console.error(e)}},type:"button",className:"bg-zinc-900 text-gray-100 px-4 py-2 mt-3 text-sm rounded-lg hover:bg-zinc-900 cursor-pointer",children:"Convert to JSON Schema"})]}),(0,a.jsx)("div",{className:`tab-content ${"toolSchema"!==i?"hidden":""}`,children:(0,a.jsx)("div",{ref:f,className:"w-full scrollbar border border-zinc-600 rounded",style:{height:"300px"}})})]})]}),(0,a.jsxs)("div",{className:"px-4 py-2 flex justify-end",children:[(0,a.jsx)("button",{className:"bg-zinc-900 text-gray-100 px-4 py-2 rounded hover:bg-gray-600 mr-2 cursor-pointer",type:"button",onClick:s,children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{try{t({schema:{name:m,parameters:y,description:x},rawJsonParams:g,autoGenerate:!1}),s()}catch(e){console.error("Error saving tool schema:",e)}},type:"button",className:"bg-orange-700 text-gray-100 px-4 py-2 rounded hover:bg-zinc-900 cursor-pointer",children:j?"Update":"Add"})]})]})})}):null}},79551:e=>{"use strict";e.exports=require("url")},90762:(e,s,t)=>{Promise.resolve().then(t.bind(t,2077))}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[4447,8259,4291,3124,4595],()=>t(24078));module.exports=a})();