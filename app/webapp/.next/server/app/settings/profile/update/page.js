(()=>{var e={};e.id=3904,e.ids=[3904],e.modules={2073:(e,s,a)=>{Promise.resolve().then(a.bind(a,80800))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10102:(e,s,a)=>{"use strict";a.d(s,{H:()=>n,Q:()=>l});var t=a(29341);let r={UPLOAD:"/api/v1alpha1/utility/upload",DOWNLOAD:"/api/v1alpha1/utility/download"},l={getUploadFile:e=>(0,t.Zq)(r.UPLOAD,"POST",e)},n={getDownloadFile:e=>{let s=new URLSearchParams;e&&e.path&&s.append("path",e.path);let a=`${r.DOWNLOAD}?${s.toString()}`;return(0,t.Zq)(a,"GET",null)}}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27685:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var t=a(60687);function r({name:e,onClick:s}){return(0,t.jsx)("button",{type:"button",onClick:s,className:"mt-2 px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 cursor-pointer",suppressHydrationWarning:!0,children:e})}a(43210)},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31577:(e,s,a)=>{Promise.resolve().then(a.bind(a,48754))},33873:e=>{"use strict";e.exports=require("path")},35262:(e,s,a)=>{"use strict";let t;a.d(s,{A:()=>n});var r=a(60687),l=a(43210);function n(){let[e,s]=(0,l.useState)(""),[a,n]=(0,l.useState)({}),[o,d]=(0,l.useState)("");return(0,r.jsxs)("div",{className:"bg-zinc-800 p-4 rounded-lg shadow-lg w-full overflow-y-auto scrollbar relative",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,r.jsx)("label",{htmlFor:"fileInput",className:"cursor-pointer inline-block text-sm px-2 py-2 bg-orange-700 text-white shadow-md font-semibold rounded-lg hover:bg-pink-900 transition",children:"Upload YAML Spec File"}),(0,r.jsx)("input",{type:"file",id:"fileInput",accept:".yaml, .yml",onChange:function(e){let s=e.target.files[0];if(s&&t){let e=new FileReader;e.onload=function(e){t.setValue(e.target.result)},e.readAsText(s)}},className:"mb-2 w-full px-2 py-2 border rounded-lg focus:outline-none hidden"})]}),(0,r.jsx)("div",{hidden:!0,id:"modalParams"}),(0,r.jsx)("label",{htmlFor:"yamlEditor",className:"block text-gray-100 font-medium mb-2",id:"yamlSpecTitle",children:"Edit YAML Content Here"}),(0,r.jsx)("div",{id:"yamlEditor",className:"w-full h-auto border-2 rounded-lg focus:outline-none font-mono"}),(0,r.jsx)("div",{className:"mt-4 flex justify-end space-x-2",children:(0,r.jsx)("button",{id:"submitYaml",type:"button",className:"px-4 py-2 bg-orange-700 text-white rounded-lg hover:bg-pink-900 shadow-lg cursor-pointer",children:"Create"})})]})}},48754:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>h});var t=a(60687),r=a(43210),l=a(16189),n=a(8222);a(86292);var o=a(74595),d=a(35262),i=a(96368),p=a(56723),c=a(30203),u=a(27685),m=a(77888);a(12873);var x=a(10102);function h(){let e=(0,l.useRouter)(),[s,a]=(0,r.useState)("form"),[h,g]=(0,r.useState)(!0),[f,v]=(0,r.useState)(null),[b,y]=(0,r.useState)({}),[j,w]=(0,r.useState)(null),[N,k]=(0,r.useState)({displayName:"",avatar:"",addresses:[{street_address1:"",street_address2:"",city:"",state:"",zip_code:"",country:"",others:""}]}),[P,A]=(0,r.useState)(1),[C,_]=(0,r.useState)(null),[S,z]=(0,r.useState)(""),[E,R]=(0,r.useState)(""),U=async e=>{let s=e.target.files[0];if(s){if(!["image/jpeg","image/jpg","image/png","image/gif"].includes(s.type)){n.oR.error("Please select a valid image file (JPEG, PNG, GIF)");return}if(s.size>5242880){n.oR.error("File size must be less than 5MB");return}_(s);let e=new FileReader;e.onload=async e=>{let a=e.target.result;z(a),await F(s,a)},e.readAsDataURL(s)}},F=async(e,s)=>{try{g(!0);let a=e.name.split(".").pop().toLowerCase(),t=s.split(",")[1],r=f?.email||j?.userInfo?.email||"";if(!r){n.oR.error("User email not found. Cannot upload image.");return}let l={resourceId:r,resource:"Profile",objects:[{name:e.name,data:t,format:a}]},o=await x.Q.getUploadFile(l);if(console.log("Avatar upload response:",o),o.output&&o.output.length>0){let e=o.output[0].responsePath;R(e),k(s=>({...s,avatar:e})),n.oR.success("Avatar uploaded successfully!")}else throw Error("Invalid upload response format")}catch(e){console.error("Error uploading avatar:",e),n.oR.error(e.message||"Failed to upload avatar"),z(""),_(null),R(""),k(e=>({...e,avatar:""})),document.getElementById("avatar").value=""}finally{g(!1)}},H=(e,s,a)=>{let t=[...N.addresses];t[e]={...t[e],[s]:a},k(e=>({...e,addresses:t}))},L=e=>{if(N.addresses.length>1){let s=N.addresses.filter((s,a)=>a!==e);k(e=>({...e,addresses:s})),A(e=>e-1)}},q=async s=>{if(s.preventDefault(),!N.displayName.trim()){n.oR.error("Please fill in the display name");return}let a=N.addresses.filter(e=>Object.values(e).some(e=>""!==e.trim()));try{g(!0);let s={action:"PATCH_USER",spec:{displayName:N.displayName,userId:f?.userId,profile:{avatar:N.avatar||E||"",addresses:a,description:f?.profile?.description||""}}};console.log("Submitting profile update data:",s);let t=await c.r.getUpdateProfile(s);console.log("Profile updated:",t),n.oR.success("Profile updated successfully!"),e.push("./")}catch(e){console.error("Error updating profile:",e),n.oR.error(e.message||"Failed to update profile")}finally{g(!1)}};return(0,t.jsx)("div",{className:"bg-zinc-800 flex h-screen",children:(0,t.jsxs)("div",{className:"overflow-y-auto scrollbar h-screen w-full",children:[(0,t.jsx)(o.A,{sectionHeader:"Update Profile",hideBackListingLink:!1,backListingLink:"./"}),(0,t.jsx)(i.A,{}),(0,t.jsx)(p.A,{isLoading:h}),(0,t.jsx)("div",{className:"flex-grow p-4 overflow-y-auto w-full",children:(0,t.jsx)("section",{className:"space-y-2",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto bg-[#1b1b1b] shadow rounded-lg p-2",children:[(0,t.jsx)("div",{className:"text-gray-100 mb-2 flex justify-center",children:(0,t.jsx)("button",{onClick:()=>a("form"),className:`whitespace-nowrap border-b-2 py-2 px-2 text-md font-medium focus:outline-none ml-4 ${"form"===s?"border-orange-700 text-orange-700 font-semibold":""}`,suppressHydrationWarning:!0,children:"Form"})}),"yaml"===s&&(0,t.jsx)("div",{id:"yamlSpec",children:(0,t.jsx)(d.A,{})}),"form"===s&&(0,t.jsx)("div",{id:"formSpec",children:(0,t.jsx)("form",{id:"dataSourceSpec",className:"space-y-4 border border-zinc-500 rounded-md text-gray-100 p-4",onSubmit:q,children:(0,t.jsxs)("fieldset",{className:"p-4 rounded",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"labels block text-sm font-medium mb-4",children:"Profile Avatar"}),(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("div",{className:"w-32 h-32 rounded-full border-4 border-gray-600 overflow-hidden bg-zinc-700 flex items-center justify-center",children:S?(0,t.jsx)("img",{src:S,alt:"Avatar Preview",className:"w-full h-full object-cover"}):(0,t.jsxs)("div",{className:"text-gray-400 text-center",children:[(0,t.jsx)("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),(0,t.jsx)("span",{className:"text-xs",children:"No Image"})]})}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200 cursor-pointer",children:(0,t.jsx)("label",{htmlFor:"avatar",className:"cursor-pointer text-white text-sm font-medium px-3 py-1 bg-orange-700 rounded-full hover:bg-orange-600 transition-colors",children:"Edit"})})]}),(0,t.jsx)("input",{id:"avatar",name:"avatar",type:"file",accept:"image/*",onChange:U,className:"hidden"}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 text-center max-w-xs",children:["Click the circle to upload a new avatar.",(0,t.jsx)("br",{}),"Supported formats: JPEG, PNG, GIF. Max size: 5MB"]}),S&&(0,t.jsx)("button",{type:"button",onClick:()=>{z(""),_(null),R(""),k(e=>({...e,avatar:""})),document.getElementById("avatar").value=""},className:"text-red-400 hover:text-red-300 text-sm underline cursor-pointer",children:"Remove Avatar"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"spec_displayName",className:"labels block text-sm font-medium mb-2",children:"Display Name *"}),(0,t.jsx)("input",{id:"spec_displayName",name:"spec.displayName",type:"text",placeholder:"Enter Display name",className:"form-input-field p-3 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm w-full",value:N.displayName,onChange:e=>{let{name:s,value:a}=e.target,t=s.replace("spec.","");k(e=>({...e,[t]:a}))},required:!0,suppressHydrationWarning:!0})]})]}),(0,t.jsxs)("details",{className:"shadow-sm border border-zinc-500 rounded-md shadow-sm p-4 mb-4",children:[(0,t.jsx)("summary",{className:"text-lg font-semibold text-gray-100 cursor-pointer",children:"Addresses"}),(0,t.jsxs)("fieldset",{className:"rounded mb-4",children:[(0,t.jsx)("div",{id:"addressesContainer",children:N.addresses.map((e,s)=>(0,t.jsxs)("div",{className:"address-entry border border-zinc-600 p-4 rounded mb-4",children:[(0,t.jsxs)("h4",{className:"text-md font-medium text-gray-200 mb-3",children:["Address ",s+1]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"labels block text-sm font-medium mb-1",children:"Street Address 1"}),(0,t.jsx)("input",{type:"text",name:`spec.addresses[${s}].street_address1`,placeholder:"Enter street address 1",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm mt-1 w-full",value:e.street_address1||"",onChange:e=>H(s,"street_address1",e.target.value),suppressHydrationWarning:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"labels block text-sm font-medium mb-1",children:"Street Address 2"}),(0,t.jsx)("input",{type:"text",name:`spec.addresses[${s}].street_address2`,placeholder:"Enter street address 2 (optional)",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm mt-1 w-full",value:e.street_address2||"",onChange:e=>H(s,"street_address2",e.target.value),suppressHydrationWarning:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"labels block text-sm font-medium mb-1",children:"City"}),(0,t.jsx)("input",{type:"text",name:`spec.addresses[${s}].city`,placeholder:"Enter city",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm mt-1 w-full",value:e.city||"",onChange:e=>H(s,"city",e.target.value),suppressHydrationWarning:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"labels block text-sm font-medium mb-1",children:"State"}),(0,t.jsx)("input",{type:"text",name:`spec.addresses[${s}].state`,placeholder:"Enter state",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm mt-1 w-full",value:e.state||"",onChange:e=>H(s,"state",e.target.value),suppressHydrationWarning:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"labels block text-sm font-medium mb-1",children:"Zip Code"}),(0,t.jsx)("input",{type:"text",name:`spec.addresses[${s}].zip_code`,placeholder:"Enter zip code",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm mt-1 w-full",value:e.zip_code||"",onChange:e=>H(s,"zip_code",e.target.value),suppressHydrationWarning:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"labels block text-sm font-medium mb-1",children:"Country"}),(0,t.jsx)("input",{type:"text",name:`spec.addresses[${s}].country`,placeholder:"Enter country",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm mt-1 w-full",value:e.country||"",onChange:e=>H(s,"country",e.target.value),suppressHydrationWarning:!0})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("label",{className:"labels block text-sm font-medium mb-1",children:"Others"}),(0,t.jsx)("textarea",{name:`spec.addresses[${s}].others`,placeholder:"Enter additional address information",rows:"3",className:"form-textarea overflow-y-auto scrollbar text-sm rounded-md bg-zinc-700 placeholder-gray-300 p-2 shadow-sm w-full",value:e.others||"",onChange:e=>H(s,"others",e.target.value),suppressHydrationWarning:!0})]}),N.addresses.length>1&&(0,t.jsx)(m.A,{onClick:()=>L(s)})]},`address-${s}`))}),(0,t.jsx)(u.A,{name:"+ Add Address",onClick:()=>{k(e=>({...e,addresses:[...e.addresses,{street_address1:"",street_address2:"",city:"",state:"",zip_code:"",country:"",others:""}]})),A(e=>e+1)}})]})]}),(0,t.jsx)("div",{className:"mt-8 flex justify-end",children:(0,t.jsx)("button",{type:"submit",disabled:h,className:`px-8 py-3 bg-orange-700 text-white rounded-md shadow-md font-medium ${h?"opacity-50 cursor-not-allowed":"hover:bg-orange-600 transition-colors"}`,suppressHydrationWarning:!0,children:h?"Updating...":"Update Profile"})})]})})})]})})})]})})}},54456:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>c,pages:()=>p,routeModule:()=>u,tree:()=>i});var t=a(65239),r=a(48088),l=a(88170),n=a.n(l),o=a(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);a.d(s,d);let i={children:["",{children:["settings",{children:["profile",{children:["update",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,80800)),"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/settings/profile/update/page.js"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,75535)),"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(a.bind(a,28069)),"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/not-found.js"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,p=["/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/settings/profile/update/page.js"],c={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/settings/profile/update/page",pathname:"/settings/profile/update",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},77888:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var t=a(60687);function r({onClick:e,name:s="Remove"}){return(0,t.jsx)("button",{type:"button",onClick:e,className:"mt-2 px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600 cursor-pointer",children:s})}a(43210)},79551:e=>{"use strict";e.exports=require("url")},80800:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/settings/profile/update/page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/settings/profile/update/page.js","default")}};var s=require("../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[4447,8259,4291,3124,4595],()=>a(54456));module.exports=t})();