(()=>{var e={};e.id=854,e.ids=[854],e.modules={802:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/settings/plugins/create/page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/settings/plugins/create/page.js","default")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4570:(e,s,a)=>{"use strict";a.d(s,{L9:()=>o,S:()=>l,VA:()=>n,pV:()=>i});var r=a(29341);let t={PLUGINS:"/api/v1alpha1/plugins"},n={getPlugins:()=>(0,r.Zq)(t.PLUGINS,"GET",null),getPluginsId:e=>(0,r.Zq)(`${t.PLUGINS}/${e}`,"GET",null)},i={getpluginsForm:e=>(0,r.Zq)(t.PLUGINS,"POST",e)},l={getPluginsUpdateForm:e=>(0,r.Zq)(t.PLUGINS,"PUT",e)},o={getPluginsArchive:e=>(0,r.Zq)(`${t.PLUGINS}/${e}`,"DELETE",null)}},5195:(e,s,a)=>{Promise.resolve().then(a.bind(a,22836))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22836:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>x});var r=a(60687),t=a(43210),n=a(74595),i=a(11388),l=a(96368),o=a(56723),d=a(4570),c=a(8222),p=a(50591),u=a(83613),m=a(27685),g=a(77888),v=a(16189);let x=()=>{let e=(0,v.useRouter)(),[s,a]=(0,t.useState)("form"),[x,h]=(0,t.useState)(!0),[y,b]=(0,t.useState)({}),[f,j]=(0,t.useState)([]),[P,w]=(0,t.useState)({}),[k,N]=(0,t.useState)([]),[S,E]=(0,t.useState)([]),[C,T]=(0,t.useState)([{key:"",value:""}]),[_,L]=(0,t.useState)({name:"",pluginType:"",pluginService:"",scope:"",editable:!0}),[A,R]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{try{h(!0);let e=await p.N.getEnums(),s=(e.enumResponse||[]).find(e=>"ResourceScope"===e.name);s&&s.value&&E(s.value);let a=e.pluginTypeMap||[];N(a);let r=a.map(e=>e.pluginTypes);j(r),console.log("Plugin types loaded:",r),console.log("Resource scopes loaded:",s?.value)}catch(e){console.error("Failed to fetch plugin data:",e),R(e.message),c.oR.error("Failed to fetch plugin configuration data")}finally{h(!1)}})()},[]),(0,t.useEffect)(()=>{if("SELECT_PLUGIN_TYPE"!==_.pluginType){let e=k.find(e=>e.pluginTypes===_.pluginType);e&&e.services?(w(e.services),L(e=>({...e,pluginService:"SELECT_SERVICE_PROVIDER"}))):w({})}else w({})},[_.pluginType,k]);let q=e=>{let{name:s,value:a,type:r,checked:t}=e.target,n=s.split(".");"spec"===n[0]&&n.shift(),L(e=>{let s={...e},i=s;if(1===n.length)return"checkbox"===r?i[n[0]]=t:i[n[0]]=a,s;for(let e=0;e<n.length-1;e++)i[n[e]]||(i[n[e]]={}),i=i[n[e]];let l=n[n.length-1];return"checkbox"===r?i[l]=t:i[l]=a,s})},z=e=>{let s=[...C];s.splice(e,1),T(s)},G=(e,s,a)=>{let r=[...C];r[e][s]=a,T(r)},I=async e=>{e.preventDefault();let s=C.filter(e=>""!==e.key.trim()),a={..._,networkParams:y,dynamicParams:s};if(console.log("Combined form data:",a),a.networkParams?.credentials&&Object.keys(a.networkParams.credentials).length>0){let e=JSON.stringify(a.networkParams.credentials||{});a.data=e}let r="SELECT_SERVICE_PROVIDER"===a.pluginService?"":a.pluginService,t={spec:{name:a.name,scope:a.scope,pluginType:a.pluginType,pluginService:r,editable:a.editable,networkParams:a.networkParams,dynamicParams:a.dynamicParams}};console.log("Full API Payload:",t),await U(t)},U=async s=>{try{h(!0);let a=(await d.pV.getpluginsForm(s)).result;a?(c.oR.success("Plugin Created",`${a.resource} Plugin created successfully.`),setTimeout(()=>{e.push("/settings/plugins")},1e3)):c.oR.success("Plugin Created","Plugin created successfully.")}catch(e){console.error("Error sending API request:",e),c.oR.error("Plugin Creation Failed")}finally{h(!1)}};return(0,r.jsx)("div",{className:"bg-zinc-800 flex h-screen",children:(0,r.jsxs)("div",{className:"overflow-y-auto scrollbar h-screen w-full",children:[(0,r.jsx)(n.A,{sectionHeader:"Create Plugins",hideBackListingLink:!1,backListingLink:"./"}),(0,r.jsx)(l.A,{}),(0,r.jsx)(o.A,{isLoading:x,isOverlay:!0}),(0,r.jsx)("div",{className:"flex-grow p-4 overflow-y-auto w-full",children:(0,r.jsx)("section",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto bg-[#1b1b1b] shadow rounded-lg p-2",children:[(0,r.jsx)("div",{className:"text-gray-100 mb-2 flex justify-center",children:(0,r.jsx)("button",{id:"formSpecB",className:"whitespace-nowrap border-b-2 py-2 px-2 text-md font-medium focus:outline-none ml-4 border-orange-700 text-orange-700 font-semibold",onClick:()=>a("form"),suppressHydrationWarning:!0,children:"Form"})}),"yaml"===s?(0,r.jsx)("div",{id:"yamlSpec"}):(0,r.jsx)("div",{id:"formSpec",children:(0,r.jsxs)("form",{id:"pluginForm",className:"space-y-2 border border-zinc-500 rounded-md text-gray-100 p-2",onSubmit:I,children:[(0,r.jsxs)("fieldset",{className:"p-4 rounded",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"labels",children:"Name"}),(0,r.jsx)("input",{id:"name",name:"name",type:"text",placeholder:"Enter plugin name",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full",value:_.name,onChange:q,required:!0,suppressHydrationWarning:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"labels",children:"Scope"}),(0,r.jsxs)("select",{name:"scope",className:"mt-1 w-full flex justify-between items-center bg-zinc-800 px-4 py-2 text-sm font-medium focus:ring-1 focus:ring-orange-700",value:_.scope,onChange:q,suppressHydrationWarning:!0,children:[(0,r.jsx)("option",{value:"SELECT_SCOPE",children:"Select Scope"}),S.map(e=>(0,r.jsx)("option",{value:e,children:(0,u.E)(e)},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"labels",children:"Plugin Type"}),(0,r.jsxs)("select",{name:"pluginType",className:"mt-1 w-full flex justify-between items-center bg-zinc-800 px-4 py-2 text-sm font-medium focus:ring-1 focus:ring-orange-700",value:_.pluginType,onChange:q,suppressHydrationWarning:!0,children:[(0,r.jsx)("option",{value:"SELECT_PLUGIN_TYPE",children:"Select Plugin Type"}),f?.map(e=>r.jsx("option",{value:e,children:u.E(e)},e))]})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"labels",children:"Service Provider"}),(0,r.jsx)("div",{className:"mt-2",children:""===_.pluginType?(0,r.jsx)("div",{className:"text-gray-400 italic",children:"Please select a Plugin Type first to see available Service Providers"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"rounded mb-4 max-h-36 scrollbar overflow-y-auto",children:(0,r.jsx)("div",{className:"grid grid-cols-4 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-6 gap-4",children:Object.keys(P).map(e=>(0,r.jsx)("div",{className:`border rounded-md p-3 cursor-pointer transition-all duration-200 flex flex-col items-center ${_.pluginService===e?"border-orange-700 bg-zinc-700":"border-zinc-600 hover:border-orange-700 hover:bg-zinc-700"}`,onClick:()=>{q({target:{name:"pluginService",value:e,type:"select"}})},children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-8 w-8 flex items-center justify-center",children:(0,r.jsx)("img",{src:P[e],alt:e,className:"max-h-full max-w-full object-contain"})}),(0,r.jsx)("div",{className:"tooltip text-sm font-medium",tooltip:(0,u.E)(e),children:(0,u.m)((0,u.E)(e),7)})]})},e))})}),(0,r.jsx)("input",{type:"hidden",name:"pluginService",value:_.pluginService})]})})]}),(0,r.jsxs)("details",{className:"border border-zinc-500 p-4 rounded mb-4",children:[(0,r.jsx)("summary",{className:"text-lg font-semibold cursor-pointer",children:"Network Credentials"}),(0,r.jsx)(i.A,{onParamsChange:e=>{JSON.stringify(y)!==JSON.stringify(e)&&b(e)}})]}),(0,r.jsxs)("details",{className:"shadow-sm border border-zinc-500 rounded-md shadow-sm p-4 mb-4",children:[(0,r.jsx)("summary",{className:"text-lg font-semibold text-gray-100 cursor-pointer",children:"Dynamic Parameters"}),(0,r.jsxs)("fieldset",{className:"rounded mb-4",children:[(0,r.jsx)("div",{id:"dynamicParamsContainer",children:C.map((e,s)=>(0,r.jsxs)("div",{className:"border p-3 rounded mb-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"labels",children:"Key"}),(0,r.jsx)("input",{type:"text",placeholder:"Enter Key",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full",value:e.key,onChange:e=>G(s,"key",e.target.value),suppressHydrationWarning:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"labels",children:"Value"}),(0,r.jsx)("input",{type:"text",placeholder:"Enter Value",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full",value:e.value,onChange:e=>G(s,"value",e.target.value),suppressHydrationWarning:!0})]})]}),s>0&&(0,r.jsx)(g.A,{onClick:()=>z(s)})]},`param-${s}`))}),(0,r.jsx)(m.A,{name:"+ Add Parameter",onClick:()=>{T([...C,{key:"",value:""}])}})]})]})]}),(0,r.jsx)("div",{className:"mt-4 flex justify-end space-x-2",children:(0,r.jsx)("button",{type:"submit",className:"px-6 py-2 bg-orange-700 text-white rounded-md shadow hover:bg-pink-900",suppressHydrationWarning:!0,disabled:x,children:x?(0,r.jsxs)("svg",{className:"animate-spin h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Create Plugin"})})]})})]})})})]})})}},27685:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});var r=a(60687);function t({name:e,onClick:s}){return(0,r.jsx)("button",{type:"button",onClick:s,className:"mt-2 px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 cursor-pointer",suppressHydrationWarning:!0,children:e})}a(43210)},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},44947:(e,s,a)=>{Promise.resolve().then(a.bind(a,802))},57028:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=a(65239),t=a(48088),n=a(88170),i=a.n(n),l=a(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(s,o);let d={children:["",{children:["settings",{children:["plugins",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,802)),"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/settings/plugins/create/page.js"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,75535)),"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(a.bind(a,28069)),"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/not-found.js"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/settings/plugins/create/page.js"],p={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/settings/plugins/create/page",pathname:"/settings/plugins/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},77888:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});var r=a(60687);function t({onClick:e,name:s="Remove"}){return(0,r.jsx)("button",{type:"button",onClick:e,className:"mt-2 px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600 cursor-pointer",children:s})}a(43210)},79551:e=>{"use strict";e.exports=require("url")}};var s=require("../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[4447,8259,4291,3124,4595,1388],()=>a(57028));module.exports=r})();