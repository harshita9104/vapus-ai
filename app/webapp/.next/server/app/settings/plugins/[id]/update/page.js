(()=>{var e={};e.id=3895,e.ids=[3895],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3309:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>h});var r=a(60687),t=a(43210),i=a(74595),n=a(11388),l=a(96368),o=a(83613),d=a(56723),p=a(4570),c=a(8222),u=a(50591),m=a(27685),g=a(77888),v=a(16189);let h=({params:e})=>{let s=(0,v.useRouter)(),a=(0,t.use)(e),h=a?.id?String(a.id).trim():"",[x,y]=(0,t.useState)("form"),[b,f]=(0,t.useState)(!0),[j,w]=(0,t.useState)({}),[P,k]=(0,t.useState)(null),[N,S]=(0,t.useState)([]),[T,C]=(0,t.useState)([]),[E,A]=(0,t.useState)({}),[U,q]=(0,t.useState)([]),[z,_]=(0,t.useState)([{key:"",value:""}]),[G,I]=(0,t.useState)({name:"",pluginType:"",pluginService:"",scope:"",editable:!0}),[L,R]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{try{f(!0);let e=await u.N.getEnums(),s=(e.enumResponse||[]).find(e=>"ResourceScope"===e.name);s&&s.value&&C(s.value);let a=e.pluginTypeMap||[];q(a);let r=a.map(e=>e.pluginTypes);if(S(r),h){let e=await p.VA.getPluginsId(h),s=e.output?.[0]||{};if(s){let e={name:s.name||"",pluginType:s.pluginType||"",pluginService:s.pluginService||"",scope:s.scope||"DOMAIN_SCOPE",editable:!1!==s.editable};if(I(e),s.networkParams&&(w(s.networkParams),k(s.networkParams)),s.dynamicParams&&s.dynamicParams.length>0&&_(s.dynamicParams),s.pluginType){let e=a.find(e=>e.pluginTypes===s.pluginType);e&&e.services&&A(e.services)}}}else console.error("No plugin ID provided"),c.oR.error("No plugin ID provided for update")}catch(e){console.error("Failed to fetch plugin data:",e),R(e.message),c.oR.error("Failed to fetch plugin configuration data")}finally{f(!1)}})()},[h]),(0,t.useEffect)(()=>{if(""!==G.pluginType){let e=U.find(e=>e.pluginTypes===G.pluginType);e&&e.services?(A(e.services),Object.keys(e.services).includes(G.pluginService)||I(e=>({...e,pluginService:""}))):A({})}else A({})},[G.pluginType,U]);let O=e=>{let{name:s,value:a,type:r,checked:t}=e.target,i=s.split(".");"spec"===i[0]&&i.shift(),I(e=>{let s={...e},n=s;if(1===i.length)return"checkbox"===r?n[i[0]]=t:n[i[0]]=a,s;for(let e=0;e<i.length-1;e++)n[i[e]]||(n[i[e]]={}),n=n[i[e]];let l=i[i.length-1];return"checkbox"===r?n[l]=t:n[l]=a,s})},H=e=>{let s=[...z];s.splice(e,1),_(s)},F=(e,s,a)=>{let r=[...z];r[e][s]=a,_(r)},W=async e=>{e.preventDefault();let s=z.filter(e=>""!==e.key.trim()),a={...G,networkParams:j,dynamicParams:s};if(a.networkParams?.credentials&&Object.keys(a.networkParams.credentials).length>0){let e=JSON.stringify(a.networkParams.credentials||{});a.data=e}let r=a.pluginService||"",t={spec:{pluginId:h,name:a.name,scope:a.scope,pluginType:a.pluginType,pluginService:r,editable:a.editable,networkParams:a.networkParams,dynamicParams:a.dynamicParams}};await $(t)},$=async e=>{try{f(!0);let a=(await p.S.getPluginsUpdateForm(e,h)).result;a?(c.oR.success("Plugin Updated",`${a.resource} Plugin updated successfully.`),setTimeout(()=>{s.push(`/settings/plugins/${h}`)},1e3)):(c.oR.success("Plugin Updated","Plugin updated successfully."),setTimeout(()=>{s.push(`/settings/plugins/${h}`)},1e3))}catch(e){console.error("Error sending API request:",e),c.oR.error("Plugin Update Failed")}finally{f(!1)}};return(0,r.jsx)("div",{className:"bg-zinc-800 flex h-screen",children:(0,r.jsxs)("div",{className:"overflow-y-auto scrollbar h-screen w-full",children:[(0,r.jsx)(i.A,{sectionHeader:"Update Plugin",hideBackListingLink:!1,backListingLink:"./"}),(0,r.jsx)(l.A,{}),(0,r.jsx)(d.A,{isLoading:b,isOverlay:!0}),(0,r.jsx)("div",{className:"flex-grow p-4 overflow-y-auto w-full",children:(0,r.jsx)("section",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto bg-[#1b1b1b] shadow rounded-lg p-2",children:[(0,r.jsx)("div",{className:"text-gray-100 mb-2 flex justify-center",children:(0,r.jsx)("button",{id:"formSpecB",className:"whitespace-nowrap border-b-2 py-2 px-2 text-md font-medium focus:outline-none ml-4 border-orange-700 text-orange-700 font-semibold",onClick:()=>y("form"),suppressHydrationWarning:!0,children:"Form"})}),(0,r.jsx)("div",{id:"formSpec",children:(0,r.jsxs)("form",{id:"pluginForm",className:"space-y-2 border border-zinc-500 rounded-md text-gray-100 p-2",onSubmit:W,children:[(0,r.jsxs)("fieldset",{className:"p-4 rounded",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"labels",children:"Name"}),(0,r.jsx)("input",{id:"name",name:"name",type:"text",placeholder:"Enter plugin name",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full",value:G.name,onChange:O,required:!0,suppressHydrationWarning:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"labels",children:"Scope"}),(0,r.jsxs)("select",{name:"scope",className:"mt-1 w-full flex justify-between items-center bg-zinc-800 px-4 py-2 text-sm font-medium focus:ring-1 focus:ring-orange-700",value:G.scope,onChange:O,suppressHydrationWarning:!0,children:[(0,r.jsx)("option",{value:"",children:"Select Scope"}),T?.map(e=>r.jsx("option",{value:e,children:o.E(e)},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"labels",children:"Plugin Type"}),(0,r.jsxs)("select",{name:"pluginType",className:"mt-1 w-full flex justify-between items-center bg-zinc-800 px-4 py-2 text-sm font-medium focus:ring-1 focus:ring-orange-700",value:G.pluginType,onChange:O,suppressHydrationWarning:!0,disabled:!0,children:[(0,r.jsx)("option",{value:"",children:"Select Plugin Type"}),N?.map(e=>r.jsx("option",{value:e,children:o.E(e)},e))]})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"labels",children:"Service Provider"}),(0,r.jsx)("div",{className:"mt-2",children:G.pluginType?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"rounded mb-4 max-h-36 scrollbar overflow-y-auto",children:(0,r.jsx)("div",{className:"grid grid-cols-4 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-6 gap-4",children:Object.keys(E).map(e=>(0,r.jsx)("div",{className:`border rounded-md p-3 cursor-pointer transition-all duration-200 flex flex-col items-center ${G.pluginService===e?"border-orange-700 bg-zinc-700":"border-zinc-600 hover:border-orange-700 hover:bg-zinc-700"}`,onClick:()=>{},children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-8 w-8 flex items-center justify-center",children:(0,r.jsx)("img",{src:E[e],alt:e,className:"max-h-full max-w-full object-contain"})}),(0,r.jsx)("div",{className:"tooltip text-sm font-medium",tooltip:(0,o.E)(e),children:(0,o.m)((0,o.E)(e),7)})]})},e))})}),(0,r.jsx)("input",{type:"hidden",name:"pluginService",value:G.pluginService})]}):(0,r.jsx)("div",{className:"text-gray-400 italic",children:"Please select a Plugin Type first to see available Service Providers"})})]}),(0,r.jsxs)("details",{className:"border border-zinc-500 p-4 rounded mb-4",children:[(0,r.jsx)("summary",{className:"text-lg font-semibold cursor-pointer",children:"Network Credentials"}),(0,r.jsx)(n.A,{onParamsChange:e=>{JSON.stringify(j)!==JSON.stringify(e)&&w(e)},initialParams:P})]}),(0,r.jsxs)("details",{className:"shadow-sm border border-zinc-500 rounded-md shadow-sm p-4 mb-4",children:[(0,r.jsx)("summary",{className:"text-lg font-semibold text-gray-100 cursor-pointer",children:"Dynamic Parameters"}),(0,r.jsxs)("fieldset",{className:"rounded mb-4",children:[(0,r.jsx)("div",{id:"dynamicParamsContainer",children:z.map((e,s)=>(0,r.jsxs)("div",{className:"border p-3 rounded mb-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"labels",children:"Key"}),(0,r.jsx)("input",{type:"text",placeholder:"Enter Key",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full",value:e.key,onChange:e=>F(s,"key",e.target.value),suppressHydrationWarning:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"labels",children:"Value"}),(0,r.jsx)("input",{type:"text",placeholder:"Enter Value",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full",value:e.value,onChange:e=>F(s,"value",e.target.value),suppressHydrationWarning:!0})]})]}),s>0&&(0,r.jsx)(g.A,{onClick:()=>H(s)})]},`param-${s}`))}),(0,r.jsx)(m.A,{name:"+ Add Parameter",onClick:()=>{_([...z,{key:"",value:""}])}})]})]})]}),(0,r.jsx)("div",{className:"mt-4 flex justify-end space-x-2",children:(0,r.jsx)("button",{type:"submit",className:"px-6 py-2 bg-orange-700 text-white rounded-md shadow hover:bg-pink-900",suppressHydrationWarning:!0,disabled:b,children:b?(0,r.jsxs)("svg",{className:"animate-spin h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Submit"})})]})})]})})})]})})}},4570:(e,s,a)=>{"use strict";a.d(s,{L9:()=>o,S:()=>l,VA:()=>i,pV:()=>n});var r=a(29341);let t={PLUGINS:"/api/v1alpha1/plugins"},i={getPlugins:()=>(0,r.Zq)(t.PLUGINS,"GET",null),getPluginsId:e=>(0,r.Zq)(`${t.PLUGINS}/${e}`,"GET",null)},n={getpluginsForm:e=>(0,r.Zq)(t.PLUGINS,"POST",e)},l={getPluginsUpdateForm:e=>(0,r.Zq)(t.PLUGINS,"PUT",e)},o={getPluginsArchive:e=>(0,r.Zq)(`${t.PLUGINS}/${e}`,"DELETE",null)}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27685:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});var r=a(60687);function t({name:e,onClick:s}){return(0,r.jsx)("button",{type:"button",onClick:s,className:"mt-2 px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 cursor-pointer",suppressHydrationWarning:!0,children:e})}a(43210)},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},42448:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>c,pages:()=>p,routeModule:()=>u,tree:()=>d});var r=a(65239),t=a(48088),i=a(88170),n=a.n(i),l=a(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(s,o);let d={children:["",{children:["settings",{children:["plugins",{children:["[id]",{children:["update",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,78911)),"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/settings/plugins/[id]/update/page.js"]}]},{}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,75535)),"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(a.bind(a,28069)),"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/not-found.js"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,p=["/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/settings/plugins/[id]/update/page.js"],c={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/settings/plugins/[id]/update/page",pathname:"/settings/plugins/[id]/update",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},48410:(e,s,a)=>{Promise.resolve().then(a.bind(a,78911))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},77888:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});var r=a(60687);function t({onClick:e,name:s="Remove"}){return(0,r.jsx)("button",{type:"button",onClick:e,className:"mt-2 px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600 cursor-pointer",children:s})}a(43210)},78911:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/settings/plugins/[id]/update/page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/settings/plugins/[id]/update/page.js","default")},79551:e=>{"use strict";e.exports=require("url")},88578:(e,s,a)=>{Promise.resolve().then(a.bind(a,3309))}};var s=require("../../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[4447,8259,4291,3124,4595,1388],()=>a(42448));module.exports=r})();