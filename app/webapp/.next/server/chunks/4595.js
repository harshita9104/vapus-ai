"use strict";exports.id=4595,exports.ids=[4595],exports.modules={74595:(e,t,o)=>{o.d(t,{A:()=>h});var r=o(60687),s=o(43210),n=o(85814),a=o.n(n),i=o(12873),l=o(30203),c=o(29341);let d={ORGACCESSTOKEN:"/api/v1alpha1/auth/token"},u={getOrgAccessToken:e=>(0,c.Zq)(d.ORGACCESSTOKEN,"POST",e)};var g=o(8222),x=o(96368);let h=({sectionHeader:e="",hideBackListingLink:t=!1,backListingLink:o=""})=>{let[n,c]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!0),[p,m]=(0,s.useState)(null),[w,f]=(0,s.useState)([]),[y,b]=(0,s.useState)(null),[j,z]=(0,s.useState)(!1),[v,k]=(0,s.useState)(null),N=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=e=>{N.current&&!N.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let I=(e,t,o=7)=>{let r=new Date;r.setTime(r.getTime()+864e5*o),document.cookie=`${e}=${t};expires=${r.toUTCString()};path=/;SameSite=Lax`},T=e=>{document.cookie=`${e}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;`},O=async e=>{try{z(!0),m(null);let t=await u.getOrgAccessToken({organization:e,utility:"ORGANIZATION_LOGIN"});console.log("Organization switched:",t),t&&t.token&&t.token.accessToken?(T("access_token"),I("access_token",t.token.accessToken),g.oR.success("Organization Switched",`Switched to ${e} successfully.`),k(e),setTimeout(()=>{window.location.reload()},1e3)):(g.oR.success("Organization Switched","Organization switched successfully."),k(e),setTimeout(()=>{window.location.reload()},1e3))}catch(e){console.error("Error switching organization:",e),g.oR.error("Organization Switch Failed"),m(`Failed to switch organization: ${e.message}`)}finally{z(!1)}},C=e=>v?e===v:e===y?.currentOrganization?.organizationId;return(0,s.useEffect)(()=>{let e=!0;return(async()=>{try{h(!0),m(null);let t=await (0,i.J)();b(t);let o=null;if(t?.currentOrganization?.organizationId?o=t.currentOrganization.organizationId:t?.organization?.organizationId?o=t.organization.organizationId:t?.organizationId?o=t.organizationId:t?.userInfo?.organizationId&&(o=t.userInfo.organizationId),console.log("Detected current org ID:",o),o&&k(o),!e)return;if(t?.userInfo?.userId){let o=t.userInfo.userId,r=await l.z.getuserProfile(o);if(console.log("Header User Profile Data:",r),!e)return;if(r.output?.users&&r.output.users.length>0){let e=r.output.users[0].roles||[];f(e),console.log("User Roles:",e)}else console.error("No users found in API response"),m("No users found in API response")}else console.error("User ID not found in global context"),m("User ID not found in global context")}catch(t){console.error("Error fetching user data:",t),e&&m(t.message||"Failed to fetch user data")}finally{e&&h(!1)}})(),()=>{e=!1}},[]),(0,r.jsxs)("header",{className:"bg-[#1b1b1b] text-gray-100 h-16",children:[(0,r.jsx)(x.A,{}),(0,r.jsxs)("div",{className:"mx-auto flex justify-between items-center p-2",children:[(0,r.jsx)("div",{className:"flex justify-around gap-10",children:!t&&(0,r.jsx)("div",{className:"flex justify-between mb-2 items-center rounded-lg p-1",children:(0,r.jsxs)(a(),{href:o,className:"inline-flex items-center text-orange-700 hover:text-orange-700",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 m-1",viewBox:"0 0 36 36",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("title",{children:"Go Back - Contained Arrow"}),(0,r.jsx)("rect",{x:"4",y:"4",width:"28",height:"28",rx:"14"}),(0,r.jsx)("line",{x1:"23",y1:"18",x2:"13",y2:"18"}),(0,r.jsx)("polyline",{points:"17 22 13 18 17 14"})]}),"Back"]})})}),(0,r.jsx)("div",{children:(0,r.jsx)("h1",{className:"text-xl text-gray-100 font-bold",children:e})}),(0,r.jsxs)("div",{className:"flex relative",ref:N,children:[(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation(),c(!n)},className:"flex items-center text-orange-700 px-4 py-2 rounded-lg hover:bg-zinc-800 hover:text-gray-100 cursor-pointer",suppressHydrationWarning:!0,disabled:j,children:["My Organization",j?(0,r.jsxs)("svg",{className:"animate-spin ml-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",className:"w-5 h-5 shrink-0",children:(0,r.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M5.333 6 8 3.334 10.667 6m0 4L8 12.667 5.333 10"})})]}),n&&(0,r.jsx)("div",{className:"absolute right-0 top-full mt-2 w-70 p-2 border border-zinc-500 rounded-lg z-10 bg-[#1b1b1b] text-gray-100 shadow-lg",children:d?(0,r.jsx)("div",{className:"py-2 px-4 text-center text-gray-400",children:"Loading..."}):p?(0,r.jsxs)("div",{className:"py-2 px-4 text-center text-red-400",children:["Error: ",p]}):(0,r.jsx)("ul",{className:"py-2",children:w.length>0?w.map((e,t)=>{let o=C(e.organizationId);return console.log(`Role ${e.organizationId} - isCurrent:`,o),(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:()=>O(e.organizationId),disabled:j,className:`block rounded-md shadow-sm px-2 py-1 m-1 text-gray-100 text-xs cursor-pointer w-full break-words transition-colors ${o?"bg-orange-600 hover:bg-orange-700 border border-orange-500":"bg-zinc-700 hover:bg-zinc-800"} ${j?"opacity-50 cursor-not-allowed":""}`,"data-organization":e.organizationId,children:(0,r.jsxs)("div",{className:"break-words flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[o&&(0,r.jsx)("svg",{className:"w-3 h-3 mr-2 text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.organizationId,o&&(0,r.jsx)("span",{className:"ml-2 text-xs opacity-90",children:"(Current)"})]}),j&&(0,r.jsxs)("svg",{className:"animate-spin h-3 w-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})]})})},e.organizationId||t)}):(0,r.jsx)("li",{className:"py-2 px-4 text-center text-gray-400",children:"No organizations found"})})})]})]})]})}},96368:(e,t,o)=>{o.d(t,{A:()=>a});var r=o(60687),s=o(8222);o(86292);var n=o(47237);function a({position:e="top-right",autoClose:t=3e3,hideProgressBar:o=!1,newestOnTop:a=!0,closeOnClick:i=!0,rtl:l=!1,pauseOnFocusLoss:c=!0,draggable:d=!0,pauseOnHover:u=!0,theme:g="dark"}){let x=(0,n.DU)`
    /* Toast container base styles */
    .Toastify__toast {
      width: 400px;
      font-size: 14px;
      font-weight: 500;
    }
    
    /* Error toast */
    .Toastify__toast--error {
      background-color: #dc7575 !important;
      color: #660000 !important;
    }
    
    .Toastify__progress-bar--error {
      background: #660000 !important;
    }
    
    /* Success toast */
    .Toastify__toast--success {
      background-color: #75dc9c !important;
      color: #003312 !important;
    }
    
    .Toastify__progress-bar--success {
      background: #003312 !important;
    }
    
    /* Info toast */
    .Toastify__toast--info {
      background-color: #75aadc !important;
      color: #002b66 !important;
    }
    
    .Toastify__progress-bar--info {
      background: #002b66 !important;
    }
  `;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x,{}),(0,r.jsx)(s.N9,{position:e,autoClose:t,hideProgressBar:o,newestOnTop:a,closeOnClick:i,rtl:l,pauseOnFocusLoss:c,draggable:d,pauseOnHover:u,theme:g})]})}}};