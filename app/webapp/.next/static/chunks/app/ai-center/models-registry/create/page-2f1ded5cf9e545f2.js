(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[989],{452:(e,s,r)=>{"use strict";let t,a;r.d(s,{A:()=>o});var l=r(5155),i=r(2115);function o(){let[e,s]=(0,i.useState)(""),[o,n]=(0,i.useState)({}),[d,c]=(0,i.useState)("");return(0,i.useEffect)(()=>(r.e(6538).then(r.bind(r,6538)),r.e(664).then(r.bind(r,664)),r.e(2026).then(r.bind(r,2026)),Promise.all([r.e(3497).then(r.t.bind(r,1455,23)),Promise.all([r.e(3497),r.e(5793)]).then(r.t.bind(r,5793,23)),Promise.all([r.e(3497),r.e(3290)]).then(r.t.bind(r,3290,23)),Promise.all([r.e(3497),r.e(9509)]).then(r.t.bind(r,1890,23)),Promise.all([r.e(3497),r.e(4510)]).then(r.t.bind(r,4510,23)),Promise.all([r.e(3497),r.e(2648)]).then(r.t.bind(r,2648,23))]).then(e=>{let[s]=e;t=s.default,!a&&document.getElementById("yamlEditor")&&document.getElementById("yamlEditor")&&(a=t(document.getElementById("yamlEditor"),{mode:"yaml",lineNumbers:!0,lineWrapping:!0,theme:"dracula",viewportMargin:1/0,lint:!0,gutters:["CodeMirror-linenumbers","CodeMirror-lint-markers"],indentUnit:2,tabSize:2,autoCloseBrackets:!0,matchBrackets:!0,styleActiveLine:!0,highlightSelectionMatches:{showToken:!0,annotateScrollbar:!0}}))}),()=>{}),[]),(0,l.jsxs)("div",{className:"bg-zinc-800 p-4 rounded-lg shadow-lg w-full overflow-y-auto scrollbar relative",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,l.jsx)("label",{htmlFor:"fileInput",className:"cursor-pointer inline-block text-sm px-2 py-2 bg-orange-700 text-white shadow-md font-semibold rounded-lg hover:bg-pink-900 transition",children:"Upload YAML Spec File"}),(0,l.jsx)("input",{type:"file",id:"fileInput",accept:".yaml, .yml",onChange:function(e){let s=e.target.files[0];if(s&&a){let e=new FileReader;e.onload=function(e){a.setValue(e.target.result)},e.readAsText(s)}},className:"mb-2 w-full px-2 py-2 border rounded-lg focus:outline-none hidden"})]}),(0,l.jsx)("div",{hidden:!0,id:"modalParams"}),(0,l.jsx)("label",{htmlFor:"yamlEditor",className:"block text-gray-100 font-medium mb-2",id:"yamlSpecTitle",children:"Edit YAML Content Here"}),(0,l.jsx)("div",{id:"yamlEditor",className:"w-full h-auto border-2 rounded-lg focus:outline-none font-mono"}),(0,l.jsx)("div",{className:"mt-4 flex justify-end space-x-2",children:(0,l.jsx)("button",{id:"submitYaml",type:"button",className:"px-4 py-2 bg-orange-700 text-white rounded-lg hover:bg-pink-900 shadow-lg cursor-pointer",children:"Create"})})]})}},1090:(e,s,r)=>{"use strict";r.d(s,{$N:()=>o,MX:()=>l,QS:()=>n,ky:()=>i});var t=r(6403);let a={MODELS_REGISTRY:"/api/v1alpha1/aistudio/models"},l={getModelsRegistry:()=>(0,t.Zq)(a.MODELS_REGISTRY,"GET",null),getModelsRegistryID:e=>(0,t.Zq)("".concat(a.MODELS_REGISTRY,"/").concat(e),"GET",null)},i={getmodelsRegistryForm:e=>(0,t.Zq)(a.MODELS_REGISTRY,"POST",e)},o={getmodelsRegistryUpdateForm:e=>(0,t.Zq)(a.MODELS_REGISTRY,"PUT",e)},n={getModelsRegistryArchive:e=>(0,t.Zq)("".concat(a.MODELS_REGISTRY,"/").concat(e),"DELETE",null)}},2545:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>x});var t=r(5155),a=r(2115),l=r(452),i=r(1440),o=r(1090),n=r(9725),d=r(9994),c=r(5799),u=r(5255),m=r(5695),p=r(3093),g=r(2417),h=r(7288);let x=()=>{var e;let s=(0,m.useRouter)(),[r,x]=(0,a.useState)("form"),[v,b]=(0,a.useState)(!1),[f,y]=(0,a.useState)([]),[w,j]=(0,a.useState)(!1),[N,S]=(0,a.useState)(!1),[E,R]=(0,a.useState)({}),[I,_]=(0,a.useState)(null),[A,k]=(0,a.useState)({SvcProvider:[],ResourceScope:[]}),[D,G]=(0,a.useState)({}),[P,C]=(0,a.useState)({name:"",node_owners:"",attributes:{service_provider:"INVALID_PROVIDER",scope:" ",approved_domains:[],discover_models:!0},securityGuardrails:{guardrails:[]}}),L={domain1:"ANAND.VAPUSDATA.COM domain"};(0,a.useEffect)(()=>{(async()=>{try{S(!0);let e=await p.N.getEnums(),s=await h.o6.getGuardrail();s&&s.output&&(y(s.output),console.log("Guardrails loaded:",s.output));let r={SvcProvider:[],ResourceScope:[]};(e.enumResponse||[]).forEach(e=>{"ResourceScope"===e.name&&(r.ResourceScope=e.value||[])});let t=e.serviceProviderLogoMap||[];r.SvcProvider=t.map(e=>e.serviceProvider),k(r),console.log("Resource scopes loaded:",r.ResourceScope),console.log("Service providers loaded:",r.SvcProvider);let a={};t.forEach(e=>{a[e.serviceProvider]=e.url}),G(a),console.log("Service provider logos loaded:",a)}catch(e){console.error("Failed to fetch enum data:",e),_(e.message),c.oR.error("Failed to fetch configuration data")}finally{S(!1)}})()},[]);let M=e=>{let{name:s,value:r,type:t,checked:a}=e.target,l=s.split(".");"spec"===l[0]&&l.shift(),C(e=>{let s={...e},i=s;for(let e=0;e<l.length-1;e++)i[l[e]]||(i[l[e]]={}),i=i[l[e]];let o=l[l.length-1];return"checkbox"===t?i[o]=a:i[o]=r,s})},T=e=>{C(s=>{let r=[...s.attributes.approved_domains],t=r.indexOf(e);return -1===t?r.push(e):r.splice(t,1),{...s,attributes:{...s.attributes,approved_domains:r}}})},z=(e,s)=>{C(r=>{let t=[...r.securityGuardrails.guardrails||[]],a=t.findIndex(s=>s.id===e);return -1===a?t.push({id:e,name:s}):t.splice(a,1),{...r,securityGuardrails:{...r.securityGuardrails,guardrails:t}}})},O=async e=>{e.preventDefault();let s={...P,attributes:{...P.attributes,networkParams:E}};console.log("Combined form data with networkParams:",s);let r={...s};""!==r.node_owners?r.node_owners=r.node_owners.split(","):r.node_owners=[];let t=r.securityGuardrails.guardrails.map(e=>e.id),a={spec:{name:r.name,node_owners:r.node_owners,attributes:{service_provider:r.attributes.service_provider,scope:r.attributes.scope,approved_domains:r.attributes.approved_domains,discover_models:r.attributes.discover_models,networkParams:r.attributes.networkParams},securityGuardrails:{guardrails:t}}};await B(a)},B=async e=>{try{S(!0);let r=await o.ky.getmodelsRegistryForm(e);console.log("Resource created:",r);let t=r.result;t?(c.oR.success("Resource Created","".concat(t.resource," Resource created successfully.")),setTimeout(()=>{s.push("/ai-center/models-registry")},1e3)):c.oR.success("Resource Created","Resource created successfully.")}catch(e){console.error("Error sending API request:",e),c.oR.error("Resource Creation Failed")}finally{S(!1)}};return(0,a.useEffect)(()=>{let e=e=>{let s=document.getElementById("dropdownMenu"),r=document.getElementById("dropdownButton");s&&r&&!s.contains(e.target)&&!r.contains(e.target)&&b(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,a.useEffect)(()=>{let e=e=>{let s=document.getElementById("guardrailsDropdownMenu"),r=document.getElementById("guardrailsDropdownButton");s&&r&&!s.contains(e.target)&&!r.contains(e.target)&&j(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,t.jsx)("div",{className:"bg-zinc-800 flex h-screen",children:(0,t.jsxs)("div",{className:"overflow-y-auto scrollbar h-screen w-full",children:[(0,t.jsx)(i.A,{sectionHeader:"Build Your Models",hideBackListingLink:!1,backListingLink:"./"}),(0,t.jsx)(d.A,{}),(0,t.jsx)(u.A,{isLoading:N,isOverlay:!0}),(0,t.jsx)("div",{className:"flex-grow p-4 overflow-y-auto w-full",children:(0,t.jsx)("section",{className:"space-y-2",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto bg-[#1b1b1b] shadow rounded-lg p-2",children:[(0,t.jsx)("div",{className:"text-gray-100 mb-2 flex justify-center",children:(0,t.jsx)("button",{id:"formSpecB",className:"whitespace-nowrap border-b-2 py-2 px-2 text-md font-medium focus:outline-none ml-4 border-orange-700 text-orange-700 font-semibold",onClick:()=>x("form"),suppressHydrationWarning:!0,children:"Form"})}),"yaml"===r?(0,t.jsx)("div",{id:"yamlSpec",children:(0,t.jsx)(l.A,{})}):(0,t.jsx)("div",{id:"formSpec",children:(0,t.jsxs)("form",{id:"dataSourceSpec",className:"space-y-2 border border-zinc-500 rounded-md text-gray-100 p-2",onSubmit:O,children:[(0,t.jsxs)("fieldset",{className:"p-4 rounded",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"labels",children:"Name"}),(0,t.jsx)("input",{id:"spec_name",name:"name",type:"text",placeholder:"Enter name",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full",value:P.name,onChange:M,suppressHydrationWarning:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"labels",children:"Node Owners"}),(0,t.jsx)("input",{id:"spec_nodeOwners",name:"node_owners",type:"text",placeholder:"Enter node owners (comma separated)",className:"form-input-field p-2 rounded-md bg-zinc-700 placeholder-gray-300 shadow-sm outline-none border-none text-sm p-1 mt-2 w-full",value:P.node_owners,onChange:M,suppressHydrationWarning:!0})]})]}),(0,t.jsxs)("fieldset",{className:"rounded mb-4",children:[(0,t.jsx)("legend",{className:"text-lg font-semibold",children:"Attributes"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"labels",children:"Scope"}),(0,t.jsxs)("select",{name:"attributes.scope",className:"mt-1 w-full flex justify-between items-center bg-zinc-800 px-4 py-2 text-sm font-medium focus:ring-1 focus:ring-orange-700",value:P.attributes.scope,onChange:M,suppressHydrationWarning:!0,children:[(0,t.jsx)("option",{value:" ",children:"Select Scope"}),null===(e=A.ResourceScope)||void 0===e?void 0:e.map(e=>(0,t.jsx)("option",{value:e,children:(0,g.E)(e)},e))]})]}),"PLATFORM_SCOPE"===P.attributes.scope&&(0,t.jsxs)("div",{className:"relative inline-block text-left w-full",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"labels",children:"Domains"}),(0,t.jsxs)("button",{type:"button",id:"dropdownButton",className:"mt-1 w-full flex justify-between items-center bg-zinc-800 px-4 py-2 text-sm font-medium focus:ring-1 focus:ring-orange-700",onClick:()=>b(!v),suppressHydrationWarning:!0,children:["Select Domains",(0,t.jsx)("svg",{className:"w-5 h-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]}),(0,t.jsx)("div",{id:"dropdownMenu",className:"absolute z-10 mt-2 w-full bg-zinc-800 rounded-md shadow-lg ".concat(v?"":"hidden"),children:(0,t.jsx)("div",{className:"p-2 space-y-2 max-h-60 overflow-y-auto",children:[{DomainId:"domain1",name:"ANAND.VAPUSDATA.COM domain"}].map(e=>(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"domain-".concat(e.DomainId),value:e.DomainId,checked:P.attributes.approved_domains.includes(e.DomainId),onChange:()=>T(e.DomainId),className:"h-4 w-4 text-orange-700 border-gray-300 rounded focus:ring-orange-700 accent-orange-700"}),(0,t.jsx)("label",{htmlFor:"domain-".concat(e.DomainId),className:"ml-2 text-sm",children:L[e.DomainId]})]},e.DomainId))})})]}),(0,t.jsxs)("div",{className:"relative inline-block text-left w-full",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"labels",children:"Guardrails"}),(0,t.jsxs)("button",{type:"button",id:"guardrailsDropdownButton",className:"mt-1 w-full flex justify-between items-center bg-zinc-800 px-4 py-2 text-sm font-medium focus:ring-1 focus:ring-orange-700",onClick:()=>j(!w),suppressHydrationWarning:!0,children:["Select Guardrails",(0,t.jsx)("svg",{className:"w-5 h-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]}),(0,t.jsx)("div",{id:"guardrailsDropdownMenu",className:"absolute z-10 mt-2 w-full bg-zinc-800 rounded-md shadow-lg ".concat(w?"":"hidden"),children:(0,t.jsx)("div",{className:"p-2 space-y-2 max-h-60 overflow-y-auto",children:f&&f.length>0?f.map(e=>(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"guardrail-".concat(e.guardrailId),value:e.guardrailId,checked:P.securityGuardrails&&P.securityGuardrails.guardrails&&P.securityGuardrails.guardrails.some(s=>s.id===e.guardrailId),onChange:()=>z(e.guardrailId,e.name),className:"h-4 w-4 text-orange-700 border-gray-300 rounded focus:ring-orange-700 accent-orange-700"}),(0,t.jsx)("label",{htmlFor:"guardrail-".concat(e.guardrailId),className:"ml-2 text-sm",children:e.name})]},e.guardrailId)):(0,t.jsx)("div",{className:"text-sm text-gray-400 p-2",children:"No guardrails available"})})})]})]}),(0,t.jsxs)("div",{className:"m-4",children:[(0,t.jsx)("label",{className:"labels",children:"Service Provider"}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("div",{className:"rounded mb-4 max-h-36 scrollbar overflow-y-auto",children:(0,t.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-5 md:grid-cols-8 lg:grid-cols-10 gap-4",children:((e,s)=>[...e.filter(e=>e===s),...e.filter(e=>e!==s)])(A.SvcProvider,P.attributes.service_provider).map(e=>(0,t.jsx)("div",{className:"border rounded-md p-3 cursor-pointer transition-all duration-200 flex flex-col items-center ".concat(P.attributes.service_provider===e?"border-orange-700 bg-zinc-700":"border-zinc-600 hover:border-orange-700 hover:bg-zinc-700"),onClick:()=>{M({target:{name:"attributes.service_provider",value:e,type:"select"}})},children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-6 w-6 flex items-center justify-center",children:D[e]?(0,t.jsx)("img",{src:D[e],alt:e,className:"max-h-full max-w-full object-contain"}):(0,t.jsx)("div",{className:"h-8 w-8 bg-zinc-600 rounded-full flex items-center justify-center text-xs",children:e.substring(0,2)})}),(0,t.jsx)("div",{className:"tooltip text-[10px] font-medium ",tooltip:(0,g.E)(e),children:(0,g.m)((0,g.E)(e),5)})]})},e))})}),(0,t.jsx)("input",{type:"hidden",name:"attributes.service_provider",value:P.attributes.service_provider})]})]})]}),(0,t.jsxs)("details",{className:"border border-zinc-500 p-4 rounded mb-4",children:[(0,t.jsx)("summary",{className:"text-lg font-semibold cursor-pointer",children:"Network Credentials"}),(0,t.jsx)(n.A,{onParamsChange:e=>{JSON.stringify(E)!==JSON.stringify(e)&&R(e)}})]})]}),(0,t.jsx)("div",{className:"mt-4 flex justify-end space-x-2",children:(0,t.jsx)("button",{type:"submit",className:"px-6 py-2 bg-orange-700 text-white rounded-md shadow hover:bg-pink-900 cursor-pointer",suppressHydrationWarning:!0,disabled:N,children:N?(0,t.jsxs)("svg",{className:"animate-spin h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Submit"})})]})})]})})})]})})}},3096:(e,s,r)=>{Promise.resolve().then(r.bind(r,2545))},7288:(e,s,r)=>{"use strict";r.d(s,{o6:()=>l,rW:()=>o,wp:()=>n,yg:()=>i});var t=r(6403);let a={GUARDRAILS:"/api/v1alpha1/aistudio/guardrails"},l={getGuardrail:()=>(0,t.Zq)(a.GUARDRAILS,"GET",null),getGuardrailId:e=>(0,t.Zq)("".concat(a.GUARDRAILS,"/").concat(e),"GET",null)},i={getGuardrailForm:e=>(0,t.Zq)(a.GUARDRAILS,"POST",e)},o={getGuardrailUpdateForm:e=>(0,t.Zq)(a.GUARDRAILS,"PUT",e)},n={getGuardrailArchive:e=>(0,t.Zq)("".concat(a.GUARDRAILS,"/").concat(e),"DELETE",null)}}},e=>{var s=s=>e(e.s=s);e.O(0,[5552,5441,1440,169,8441,1684,7358],()=>s(3096)),_N_E=e.O()}]);