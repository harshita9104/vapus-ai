"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1440],{41:(e,t,n)=>{n.d(t,{r:()=>i,z:()=>s});var o=n(6403);let r={USER:"/api/v1alpha1/users"},s={getuserProfile:e=>(0,o.Zq)("".concat(r.USER,"/").concat(e),"GET",null)},i={getUpdateProfile:e=>(0,o.Zq)(r.USER,"POST",e)}},259:(e,t,n)=>{n.d(t,{J:()=>s,y:()=>i});var o=n(6403),r=n(5125);let s=async()=>{var e;return{userInfo:(null===(e=function(e){try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)}catch(e){return null}}((0,o.iD)()))||void 0===e?void 0:e.scope)||null}},i=async()=>{try{var e,t;let n=await r.N.getDomains();return{currentOrganization:(null==n?void 0:null===(t=n.output)||void 0===t?void 0:null===(e=t.organizations)||void 0===e?void 0:e[0])||null}}catch(e){return console.error("Error fetching global data:",e),{organizations:[],currentOrganization:null,error:e}}}},1440:(e,t,n)=>{n.d(t,{A:()=>p});var o=n(5155),r=n(2115),s=n(6874),i=n.n(s),a=n(259),l=n(41),c=n(6403);let d={ORGACCESSTOKEN:"/api/v1alpha1/auth/token"},u={getOrgAccessToken:e=>(0,c.Zq)(d.ORGACCESSTOKEN,"POST",e)};var g=n(5799),h=n(9994);let p=e=>{let{sectionHeader:t="",hideBackListingLink:n=!1,backListingLink:s=""}=e,[c,d]=(0,r.useState)(!1),[p,v]=(0,r.useState)(!0),[f,m]=(0,r.useState)(null),[x,w]=(0,r.useState)([]),[y,b]=(0,r.useState)(null),[z,j]=(0,r.useState)(!1),[k,N]=(0,r.useState)(null),O=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=e=>{O.current&&!O.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let S=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,o=new Date;o.setTime(o.getTime()+864e5*n),document.cookie="".concat(e,"=").concat(t,";expires=").concat(o.toUTCString(),";path=/;SameSite=Lax")},I=e=>{document.cookie="".concat(e,"=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;")},T=async e=>{try{j(!0),m(null);let t=await u.getOrgAccessToken({organization:e,utility:"ORGANIZATION_LOGIN"});console.log("Organization switched:",t),t&&t.token&&t.token.accessToken?(I("access_token"),S("access_token",t.token.accessToken),g.oR.success("Organization Switched","Switched to ".concat(e," successfully.")),N(e),setTimeout(()=>{window.location.reload()},1e3)):(g.oR.success("Organization Switched","Organization switched successfully."),N(e),setTimeout(()=>{window.location.reload()},1e3))}catch(e){console.error("Error switching organization:",e),g.oR.error("Organization Switch Failed"),m("Failed to switch organization: ".concat(e.message))}finally{j(!1)}},_=e=>{var t;return k?e===k:e===(null==y?void 0:null===(t=y.currentOrganization)||void 0===t?void 0:t.organizationId)};return(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{var t,n,o,r,s;v(!0),m(null);let i=await (0,a.J)();b(i);let c=null;if((null==i?void 0:null===(t=i.currentOrganization)||void 0===t?void 0:t.organizationId)?c=i.currentOrganization.organizationId:(null==i?void 0:null===(n=i.organization)||void 0===n?void 0:n.organizationId)?c=i.organization.organizationId:(null==i?void 0:i.organizationId)?c=i.organizationId:(null==i?void 0:null===(o=i.userInfo)||void 0===o?void 0:o.organizationId)&&(c=i.userInfo.organizationId),console.log("Detected current org ID:",c),c&&N(c),!e)return;if(null==i?void 0:null===(r=i.userInfo)||void 0===r?void 0:r.userId){let t=i.userInfo.userId,n=await l.z.getuserProfile(t);if(console.log("Header User Profile Data:",n),!e)return;if((null===(s=n.output)||void 0===s?void 0:s.users)&&n.output.users.length>0){let e=n.output.users[0].roles||[];w(e),console.log("User Roles:",e)}else console.error("No users found in API response"),m("No users found in API response")}else console.error("User ID not found in global context"),m("User ID not found in global context")}catch(t){console.error("Error fetching user data:",t),e&&m(t.message||"Failed to fetch user data")}finally{e&&v(!1)}})(),()=>{e=!1}},[]),(0,o.jsxs)("header",{className:"bg-[#1b1b1b] text-gray-100 h-16",children:[(0,o.jsx)(h.A,{}),(0,o.jsxs)("div",{className:"mx-auto flex justify-between items-center p-2",children:[(0,o.jsx)("div",{className:"flex justify-around gap-10",children:!n&&(0,o.jsx)("div",{className:"flex justify-between mb-2 items-center rounded-lg p-1",children:(0,o.jsxs)(i(),{href:s,className:"inline-flex items-center text-orange-700 hover:text-orange-700",children:[(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 m-1",viewBox:"0 0 36 36",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("title",{children:"Go Back - Contained Arrow"}),(0,o.jsx)("rect",{x:"4",y:"4",width:"28",height:"28",rx:"14"}),(0,o.jsx)("line",{x1:"23",y1:"18",x2:"13",y2:"18"}),(0,o.jsx)("polyline",{points:"17 22 13 18 17 14"})]}),"Back"]})})}),(0,o.jsx)("div",{children:(0,o.jsx)("h1",{className:"text-xl text-gray-100 font-bold",children:t})}),(0,o.jsxs)("div",{className:"flex relative",ref:O,children:[(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation(),d(!c)},className:"flex items-center text-orange-700 px-4 py-2 rounded-lg hover:bg-zinc-800 hover:text-gray-100 cursor-pointer",suppressHydrationWarning:!0,disabled:z,children:["My Organization",z?(0,o.jsxs)("svg",{className:"animate-spin ml-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",className:"w-5 h-5 shrink-0",children:(0,o.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M5.333 6 8 3.334 10.667 6m0 4L8 12.667 5.333 10"})})]}),c&&(0,o.jsx)("div",{className:"absolute right-0 top-full mt-2 w-70 p-2 border border-zinc-500 rounded-lg z-10 bg-[#1b1b1b] text-gray-100 shadow-lg",children:p?(0,o.jsx)("div",{className:"py-2 px-4 text-center text-gray-400",children:"Loading..."}):f?(0,o.jsxs)("div",{className:"py-2 px-4 text-center text-red-400",children:["Error: ",f]}):(0,o.jsx)("ul",{className:"py-2",children:x.length>0?x.map((e,t)=>{let n=_(e.organizationId);return console.log("Role ".concat(e.organizationId," - isCurrent:"),n),(0,o.jsx)("li",{children:(0,o.jsx)("button",{onClick:()=>T(e.organizationId),disabled:z,className:"block rounded-md shadow-sm px-2 py-1 m-1 text-gray-100 text-xs cursor-pointer w-full break-words transition-colors ".concat(n?"bg-orange-600 hover:bg-orange-700 border border-orange-500":"bg-zinc-700 hover:bg-zinc-800"," ").concat(z?"opacity-50 cursor-not-allowed":""),"data-organization":e.organizationId,children:(0,o.jsxs)("div",{className:"break-words flex items-center justify-between",children:[(0,o.jsxs)("span",{className:"flex items-center",children:[n&&(0,o.jsx)("svg",{className:"w-3 h-3 mr-2 text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.organizationId,n&&(0,o.jsx)("span",{className:"ml-2 text-xs opacity-90",children:"(Current)"})]}),z&&(0,o.jsxs)("svg",{className:"animate-spin h-3 w-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})]})})},e.organizationId||t)}):(0,o.jsx)("li",{className:"py-2 px-4 text-center text-gray-400",children:"No organizations found"})})})]})]})]})}},5125:(e,t,n)=>{n.d(t,{E:()=>i,N:()=>s});var o=n(6403);let r={DOMAIN:"/api/v1alpha1/organizations/{organizations_id}",ADD_USERS:"/api/v1alpha1/organizations/{organizations_id}/users"},s={getDomains:()=>(0,o.Zq)(r.DOMAIN,"GET",null)},i={getAddUsers:e=>(0,o.Zq)(r.ADD_USERS,"PUT",e)}},6403:(e,t,n)=>{n.d(t,{Zq:()=>d,iD:()=>i});let o="",r=e=>{if("undefined"==typeof document)return null;let t="; ".concat(document.cookie).split("; ".concat(e,"="));return 2===t.length?t.pop().split(";").shift():null},s=()=>{let e=r("access_token");e&&!o&&(o=e)},i=()=>(o||s(),o);s();let a=e=>{let t=[];try{return[JSON.parse(e)]}catch(e){console.log("Parsing as streaming response...")}if(e.includes("data:"))return l(e);for(let n of e.split(RegExp("(?<=})\\s*(?={)"))){let e=n.trim();if(e)try{let n=JSON.parse(e);t.push(n)}catch(t){console.error("Failed to parse chunk:",e,t)}}return t},l=e=>{let t=[];for(let n of e.split("\n")){let e=n.trim();if(e&&"data: [DONE]"!==e&&"[DONE]"!==e&&e.startsWith("data: ")){let n=e.substring(6);try{let e=JSON.parse(n);t.push(e)}catch(e){console.error("Failed to parse SSE chunk:",n,e)}}}return t},c=e=>{var t,n,o,r,s,i,a,l,c,d,u,g;if(!e||0===e.length)return null;if(1===e.length)return e[0];let h="",p=null;for(let l of e)(null===(r=l.result)||void 0===r?void 0:null===(o=r.choices)||void 0===o?void 0:null===(n=o[0])||void 0===n?void 0:null===(t=n.messages)||void 0===t?void 0:t.content)?(h+=l.result.choices[0].messages.content,p=l):(null===(a=l.choices)||void 0===a?void 0:null===(i=a[0])||void 0===i?void 0:null===(s=i.delta)||void 0===s?void 0:s.content)&&(h+=l.choices[0].delta.content,p=l);if(p&&h){if(null===(d=p.result)||void 0===d?void 0:null===(c=d.choices)||void 0===c?void 0:null===(l=c[0])||void 0===l?void 0:l.messages)return{...p,result:{...p.result,choices:[{...p.result.choices[0],messages:{...p.result.choices[0].messages,content:h}}]}};if(null===(g=p.choices)||void 0===g?void 0:null===(u=g[0])||void 0===u?void 0:u.delta)return{result:{created:p.created,model:p.model,object:"chat.completion",choices:[{messages:{role:"assistant",content:h,structuredContent:[],toolCalls:[]},finishReason:p.choices[0].finish_reason||"",index:p.choices[0].index||"0",delta:null}],usage:[],event:"data",id:p.id,serviceTier:"",systemFingerprint:p.system_fingerprint||""}}}return e[e.length-1]},d=async function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};console.log("submit the data",n);let r=i(),s="".concat("http://127.0.0.1:9017").concat(e),l={method:t,headers:{authorization:"Bearer ".concat(r),"Content-Type":"application/json",...o.headers||{}},redirect:"follow",...Object.fromEntries(Object.entries(o).filter(e=>{let[t]=e;return"headers"!==t}))};n&&(l.body=JSON.stringify(n));let d=await fetch(s,l);if(!d.ok)throw Error("API error: ".concat(d.status));return c(a(await d.text()))}},9994:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(5933),r=n(5155),s=n(5799);n(8017);var i=n(4987);function a(){let e=(0,o._)(["\n    /* Toast container base styles */\n    .Toastify__toast {\n      width: 400px;\n      font-size: 14px;\n      font-weight: 500;\n    }\n    \n    /* Error toast */\n    .Toastify__toast--error {\n      background-color: #dc7575 !important;\n      color: #660000 !important;\n    }\n    \n    .Toastify__progress-bar--error {\n      background: #660000 !important;\n    }\n    \n    /* Success toast */\n    .Toastify__toast--success {\n      background-color: #75dc9c !important;\n      color: #003312 !important;\n    }\n    \n    .Toastify__progress-bar--success {\n      background: #003312 !important;\n    }\n    \n    /* Info toast */\n    .Toastify__toast--info {\n      background-color: #75aadc !important;\n      color: #002b66 !important;\n    }\n    \n    .Toastify__progress-bar--info {\n      background: #002b66 !important;\n    }\n  "]);return a=function(){return e},e}function l(e){let{position:t="top-right",autoClose:n=3e3,hideProgressBar:o=!1,newestOnTop:l=!0,closeOnClick:c=!0,rtl:d=!1,pauseOnFocusLoss:u=!0,draggable:g=!0,pauseOnHover:h=!0,theme:p="dark"}=e,v=(0,i.DU)(a());return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v,{}),(0,r.jsx)(s.N9,{position:t,autoClose:n,hideProgressBar:o,newestOnTop:l,closeOnClick:c,rtl:d,pauseOnFocusLoss:u,draggable:g,pauseOnHover:h,theme:p})]})}}}]);